var EmailsEditor=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){var r=e(5).default;t.exports=r},function(t,n,e){var r=e(2),o=e(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1},i=(r(o,a),o.locals?o.locals:{});t.exports=i},function(t,n,e){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),i=[];function c(t){for(var n=-1,e=0;e<i.length;e++)if(i[e].identifier===t){n=e;break}return n}function l(t,n){for(var e={},r=[],o=0;o<t.length;o++){var a=t[o],l=n.base?a[0]+n.base:a[0],s=e[l]||0,u="".concat(l," ").concat(s);e[l]=s+1;var f=c(u),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(i[f].references++,i[f].updater(d)):i.push({identifier:u,updater:b(d,n),references:1}),r.push(u)}return r}function s(t){var n=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=e.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){n.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(n);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var u,f=(u=[],function(t,n){return u[t]=n,u.filter(Boolean).join("\n")});function d(t,n,e,r){var o=e?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(n,o);else{var a=document.createTextNode(o),i=t.childNodes;i[n]&&t.removeChild(i[n]),i.length?t.insertBefore(a,i[n]):t.appendChild(a)}}function p(t,n,e){var r=e.css,o=e.media,a=e.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var m=null,v=0;function b(t,n){var e,r,o;if(n.singleton){var a=v++;e=m||(m=s(n)),r=d.bind(null,e,a,!1),o=d.bind(null,e,a,!0)}else e=s(n),r=p.bind(null,e,n),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else o()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var e=l(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<e.length;r++){var o=c(e[r]);i[o].references--}for(var a=l(t,n),s=0;s<e.length;s++){var u=c(e[s]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}e=a}}}},function(t,n,e){(n=e(4)(!1)).push([t.i,'.form-container{width:600px;height:400px;margin:20px}.form{display:flex;flex-direction:column;box-shadow:0 10px 20px 0 rgba(0,0,0,0.3);border-radius:16px 16px 16px 16px;font:400 14px/24px Open Sans,sans-serif}.form__top{flex:0 1 250px;padding:50px 50px 0px 50px;border-radius:16px 16px 0px 0px;background-color:#f8f8f7}.form__bottom{flex:0 1 75px;padding:12.5px 50px 12.5px 50px;border-radius:0px 0px 16px 16px;background-color:white;display:flex;justify-content:flex-start;align-items:center}.form__header{height:50px;display:flex;justify-content:flex-start;align-items:center;font-size:20px}.form__header .bold-text{font-weight:bold}.form__editor{height:170px;min-width:500px;margin-bottom:30px;display:flex;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;background-color:white;border-radius:4px;border:1px solid #c3c1d0;float:left;overflow:auto}.form__editor__input{display:inline-block;flex:1 1 auto;margin:3px;border:none;outline:none;line-height:24px}.form__editor__email{background-color:#e0eaff;display:flex;padding:0px 10px;margin:5px 3px;border:none;border-radius:12px;outline:none;line-height:24px}.form__editor__remover::after{content:"×";font-size:large;padding:0px 5px;cursor:pointer}.form__editor__email--error{text-decoration:underline red}.clearfix::after{content:"";clear:both;display:block}.form__footer{height:100%;display:flex;justify-content:flex-start;align-items:center}.button_primary{color:white;background-color:#4262FF;border-color:#4262FF;border-radius:4px;border:1px solid;padding:10px 20px 10px 20px;margin:0px 10px;text-align:center;font:400 14px/24px Open Sans,sans-serif;cursor:pointer}\n',""]),t.exports=n},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",r=t[3];if(!r)return e;if(n&&"function"==typeof btoa){var o=(i=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(l," */")),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}var i,c,l;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&o[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),n.push(l))}},n}},function(t,n,e){"use strict";e.r(n);e(1);var r=function(t){return"\n        <div class=".concat("form__header",'>\n            Share <span class="bold-text">   ').concat(t,"   </span> with others\n        </div>\n    ")},o=new Map,a=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,i=function(t){return o.has(t)||o.set(t,a.test(t)),o.get(t)},c=function t(n){return"\n        <div class=".concat(t.EDITOR_CLASS,' data-ns="editor">\n            ').concat(t.innerTemplate(n),"\n        </div>\n    ")};c.EDITOR_CLASS="form__editor",c.INPUT_CLASS="form__editor__input",c.EMAIL_CLASS="form__editor__email",c.REMOVER_CLASS="form__editor__remover",c.ERROR_CLASS="form__editor__email--error",c.innerTemplate=function(t){var n=0;return t.reduce((function(t,e){return t+"\n            <div class=".concat(c.EMAIL_CLASS," data-key=").concat(n++,"> \n                <span class=").concat(i(e)?"":c.ERROR_CLASS," > ").concat(e," </span>\n                <span class=").concat(c.REMOVER_CLASS," data-ns=").concat("REMOVE","></span>\n            </div>\n        ")}),"")+"<input class=".concat(c.INPUT_CLASS," data-ns=").concat("RECORD",' type="text" contenteditable="true" placeholder="add more people..."></input>')};var l=c,s=function(t,n){return'\n        <button type="button" class='.concat("button_primary"," data-ns=").concat(n,">\n            ").concat(t,"\n        </button>\n    ")},u=function(){return"\n        <div class=".concat("form__footer",">\n            ").concat(s("Add email","ADD"),"\n            ").concat(s("Get emails count","GET_COUNT"),"\n        </div>\n    ")},f=function(t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t.replace(/[&<>"'/]/gi,(function(t){return n[t]}))};function d(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(){return(p=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}var m=function(t){var n=p({},t);console.log("Build -- [Form] -- start");var e=n.boardName,o=e.replace(/\s/g,""),a=n.emails,i=function(){},c=document.createElement("div");c.setAttribute("id",o),c.setAttribute("class","form-container");var s="\n\t\t<div class=".concat("form",">\t\n\t\t\t<div class=").concat("form__top",">\n\t\t\t\t").concat(r(e),"\n\t\t\t\t").concat(l(a),"\n\t\t\t</div>\n\t\t\t<div class=").concat("form__bottom",">\n\t\t\t\t").concat(u(),"\n\t\t\t</div>\n\t\t</div>\n    ");c.innerHTML=s;return console.log("Build -- [Form] -- end"),{form:c,getEmails:function(){return a},setEmails:function(t){t=t.map((function(t){return f(t.trim())})).filter((function(t){return""!==t})),function(t){document.querySelector("#"+o+" ."+l.EDITOR_CLASS).innerHTML=l.innerTemplate(t)}(a=d(t)),i(a)},subscribe:function(t){i=t}}},v=function(){for(var t,n,e="abcdefghijklmnopqrstuvwxyz",r=(t=4,n=10,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t))+t),o="",a=0;a<r;a++)o+=e[Math.floor(Math.random()*e.length)];return o+"@gmail.com"};function b(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h={"click.REMOVE":function(t,n){var e=t.parentNode.dataset.key,r=n.getEmails();r.splice(e,1),n.setEmails(r)},"click.ADD":function(t,n){var e=n.getEmails(),r=v();e.push(r),n.setEmails(e)},"click.GET_COUNT":function(t,n,e){var r=0;n.getEmails().forEach((function(t){i(t)&&r++})),alert("Valid emails count : "+r)},"keydown.RECORD":function(t,n,e){var r;return function(){var o=this,a=arguments,i=function(){r=null,e||t.apply(o,a)},c=e&&!r;clearTimeout(r),r=setTimeout(i,n),c&&t.apply(o,a)}}((function(t,n,e){console.log("key handler");var r=e.which||e.keyCode;if(13===r||188===r){var o=t.value;if(t.value="",null==o||""===o)return;var a=n.getEmails();a.push(o),n.setEmails(a)}}),300,!1),"paste.RECORD":function(t,n,e){var r=(e.clipboardData||window.clipboardData).getData("text");if(null!=r&&""!==r){r=r.split(",");var o=n.getEmails();n.setEmails([].concat(b(o),b(r)))}},"focusout.RECORD":function(t,n,e){var r=t.value;if(t.value="",null!=r&&""!==r){var o=n.getEmails();o.push(r),n.setEmails(o)}}},x=function(t,n,e,r){var o=h[n+"."+t];"function"==typeof o&&o(e,r,event)},g={listenOn:function(t,n,e){n.forEach((function(n){t.addEventListener(n,(function(t){t.stopPropagation();var n=t.target,r=t.type,o=n.dataset.ns;x(o,r,n,e)}))}))}};function y(t,n){if(null==t)return{};var e,r,o=function(t,n){if(null==t)return{};var e,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||(o[e]=t[e]);return o}(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}n.default=function(t){var n=t.container,e=y(t,["container"]);console.log("Render -- [EmailsEditor] -- Render in ".concat(n.id," with options ").concat(JSON.stringify(e)));var r=performance.now(),o=m(e),a=o.form,i=o.getEmails,c=o.setEmails,l=o.subscribe;n.append(a),g.listenOn(a,["click","keydown","focusout","paste"],{setEmails:c,getEmails:i});var s=performance.now();return console.log("Render -- [EmailsEditor] -- Finishing rendering #".concat(e.boardName,"# within ").concat(Math.ceil(s-r)," ms")),{getEmails:i,setEmails:c,subscribe:l}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2VudHJ5LmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zdHlsZXMvbWFpbi5zY3NzPzY5YzciLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zdHlsZXMvbWFpbi5zY3NzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2NvbXBvbmVudHMvSGVhZGVyLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy91dGlscy92YWxpZGF0ZUVtYWlsLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9jb21wb25lbnRzL0VkaXRvci5qcyIsIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3IvLi9zcmMvZXZlbnRzL05hbWVTcGFjZS5qcyIsIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3IvLi9zcmMvY29tcG9uZW50cy9CdXR0b24uanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2NvbXBvbmVudHMvRm9vdGVyLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zZWN1cml0eS9zYW5pdGl6ZUlucHV0LmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9jb21wb25lbnRzL0Zvcm0uanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL3V0aWxzL2dldFJhbmRvbUVtYWlsLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9ldmVudHMvSGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL3V0aWxzL2RlYm91bmNlLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9ldmVudHMvS2V5cy5qcyIsIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3IvLi9zcmMvZXZlbnRzL0xpc3RlbmVyLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVtYWlsc0VkaXRvciIsInJlcXVpcmUiLCJhcGkiLCJjb250ZW50IiwiZGVmYXVsdCIsIm9wdGlvbnMiLCJleHBvcnRlZCIsImxvY2FscyIsIm1lbW8iLCJpc09sZElFIiwiQm9vbGVhbiIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIiwidXNlU291cmNlTWFwIiwidGhpcyIsIm1hcCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwiYmFzZTY0IiwiZGF0YSIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsIkhlYWRlciIsImJvYXJkTmFtZSIsImNhY2hlIiwiTWFwIiwicmVnZXgiLCJ2YWxpZGF0ZUVtYWlsIiwiZW1haWwiLCJoYXMiLCJzZXQiLCJ0ZXN0IiwiRWRpdG9yIiwiZW1haWxzIiwiRURJVE9SX0NMQVNTIiwiaW5uZXJUZW1wbGF0ZSIsIklOUFVUX0NMQVNTIiwiRU1BSUxfQ0xBU1MiLCJSRU1PVkVSX0NMQVNTIiwiRVJST1JfQ0xBU1MiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsIkJ1dHRvbiIsImxhYmVsIiwiRm9vdGVyIiwic2FuaXRpemVJbnB1dCIsImlucHV0IiwicmVwbGFjZSIsIm1hdGNoIiwiRm9ybSIsImNvbnNvbGUiLCJsb2ciLCJjYWxsYmFjayIsImZvcm0iLCJ0ZW1wbGF0ZSIsImlubmVySFRNTCIsImdldEVtYWlscyIsInNldEVtYWlscyIsIm5ld0VtYWlscyIsInRyaW0iLCJyZW5kZXJFbWFpbHMiLCJzdWJzY3JpYmUiLCJuZXdDYWxsYmFjayIsImdldFJhbmRvbUVtYWlsIiwibWluIiwibWF4IiwiY2hhcnMiLCJhY2NvdW50TGVuZ3RoIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsInJhbmRvbSIsImFjY291bnQiLCJFdmVudE1hcCIsImFjdGlvbnMiLCJpZHgiLCJkYXRhc2V0IiwibmV3RW1haWwiLCJldmVudCIsImFsZXJ0IiwiZngiLCJ0aW1lb3V0IiwibGVhZGluZyIsIl9fdGltZW91dCIsImNvbnRleHQiLCJhcmdzIiwiYXJndW1lbnRzIiwibGF0ZXIiLCJhcHBseSIsImNhbGxOb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZGVib3VuY2UiLCJ3aGljaCIsImtleUNvZGUiLCJjbGlwYm9hcmREYXRhIiwiZ2V0RGF0YSIsInNwbGl0IiwiaGFuZGxlIiwidHlwZSIsImhhbmRsZXIiLCJMaXN0ZW5lciIsImxpc3Rlbk9uIiwiZWxlbWVudCIsImV2ZW50cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJuYW1lU3BhY2UiLCJjb250YWluZXIiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwiYXBwZW5kIiwiZW5kIl0sIm1hcHBpbmdzIjoiNkJBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsa0JDbEZyRCxJQUFNQyxFQUFlQyxFQUFRLEdBQVIsUUFFckJsQyxFQUFPRCxRQUFVa0MsRyxnQkNGakIsSUFBSUUsRUFBTSxFQUFRLEdBQ0ZDLEVBQVUsRUFBUSxHQUlDLGlCQUZ2QkEsRUFBVUEsRUFBUWYsV0FBYWUsRUFBUUMsUUFBVUQsS0FHL0NBLEVBQVUsQ0FBQyxDQUFDcEMsRUFBT0MsRUFBSW1DLEVBQVMsTUFHOUMsSUFBSUUsRUFBVSxDQUVkLE9BQWlCLE9BQ2pCLFdBQW9CLEdBSWhCQyxHQUZTSixFQUFJQyxFQUFTRSxHQUVYRixFQUFRSSxPQUFTSixFQUFRSSxPQUFTLElBSWpEeEMsRUFBT0QsUUFBVXdDLEcsNkJDbEJqQixJQUNNRSxFQURGQyxFQUVLLFdBVUwsWUFUb0IsSUFBVEQsSUFNVEEsRUFBT0UsUUFBUUMsUUFBVUMsVUFBWUEsU0FBU0MsTUFBUUYsT0FBT0csT0FHeEROLEdBSVBPLEVBQVksV0FDZCxJQUFJUCxFQUFPLEdBQ1gsT0FBTyxTQUFrQlEsR0FDdkIsUUFBNEIsSUFBakJSLEVBQUtRLEdBQXlCLENBQ3ZDLElBQUlDLEVBQWNMLFNBQVNNLGNBQWNGLEdBRXpDLEdBQUlMLE9BQU9RLG1CQUFxQkYsYUFBdUJOLE9BQU9RLGtCQUM1RCxJQUdFRixFQUFjQSxFQUFZRyxnQkFBZ0JDLEtBQzFDLE1BQU9DLEdBRVBMLEVBQWMsS0FJbEJULEVBQUtRLEdBQVVDLEVBR2pCLE9BQU9ULEVBQUtRLElBcEJBLEdBd0JaTyxFQUFjLEdBRWxCLFNBQVNDLEVBQXFCQyxHQUc1QixJQUZBLElBQUlDLEdBQVUsRUFFTDFELEVBQUksRUFBR0EsRUFBSXVELEVBQVlJLE9BQVEzRCxJQUN0QyxHQUFJdUQsRUFBWXZELEdBQUd5RCxhQUFlQSxFQUFZLENBQzVDQyxFQUFTMUQsRUFDVCxNQUlKLE9BQU8wRCxFQUdULFNBQVNFLEVBQWFDLEVBQU14QixHQUkxQixJQUhBLElBQUl5QixFQUFhLEdBQ2JDLEVBQWMsR0FFVC9ELEVBQUksRUFBR0EsRUFBSTZELEVBQUtGLE9BQVEzRCxJQUFLLENBQ3BDLElBQUlnRSxFQUFPSCxFQUFLN0QsR0FDWmlFLEVBQUs1QixFQUFRNkIsS0FBT0YsRUFBSyxHQUFLM0IsRUFBUTZCLEtBQU9GLEVBQUssR0FDbERHLEVBQVFMLEVBQVdHLElBQU8sRUFDMUJSLEVBQWEsR0FBR1csT0FBT0gsRUFBSSxLQUFLRyxPQUFPRCxHQUMzQ0wsRUFBV0csR0FBTUUsRUFBUSxFQUN6QixJQUFJRSxFQUFRYixFQUFxQkMsR0FDN0JhLEVBQU0sQ0FDUkMsSUFBS1AsRUFBSyxHQUNWUSxNQUFPUixFQUFLLEdBQ1pTLFVBQVdULEVBQUssS0FHSCxJQUFYSyxHQUNGZCxFQUFZYyxHQUFPSyxhQUNuQm5CLEVBQVljLEdBQU9NLFFBQVFMLElBRTNCZixFQUFZcUIsS0FBSyxDQUNmbkIsV0FBWUEsRUFDWmtCLFFBQVNFLEVBQVNQLEVBQUtqQyxHQUN2QnFDLFdBQVksSUFJaEJYLEVBQVlhLEtBQUtuQixHQUduQixPQUFPTSxFQUdULFNBQVNlLEVBQW1CekMsR0FDMUIsSUFBSTBDLEVBQVFuQyxTQUFTb0MsY0FBYyxTQUMvQkMsRUFBYTVDLEVBQVE0QyxZQUFjLEdBRXZDLFFBQWdDLElBQXJCQSxFQUFXQyxNQUF1QixDQUMzQyxJQUFJQSxFQUFtRCxLQUVuREEsSUFDRkQsRUFBV0MsTUFBUUEsR0FRdkIsR0FKQXhFLE9BQU95RSxLQUFLRixHQUFZRyxTQUFRLFNBQVU3RCxHQUN4Q3dELEVBQU1NLGFBQWE5RCxFQUFLMEQsRUFBVzFELE9BR1AsbUJBQW5CYyxFQUFRaUQsT0FDakJqRCxFQUFRaUQsT0FBT1AsT0FDVixDQUNMLElBQUkvQixFQUFTRCxFQUFVVixFQUFRaUQsUUFBVSxRQUV6QyxJQUFLdEMsRUFDSCxNQUFNLElBQUl1QyxNQUFNLDJHQUdsQnZDLEVBQU93QyxZQUFZVCxHQUdyQixPQUFPQSxFQWNULElBQ01VLEVBREZDLEdBQ0VELEVBQVksR0FDVCxTQUFpQnBCLEVBQU9zQixHQUU3QixPQURBRixFQUFVcEIsR0FBU3NCLEVBQ1pGLEVBQVVHLE9BQU9sRCxTQUFTbUQsS0FBSyxRQUkxQyxTQUFTQyxFQUFvQmYsRUFBT1YsRUFBTzBCLEVBQVF6QixHQUNqRCxJQUFJQyxFQUFNd0IsRUFBUyxHQUFLekIsRUFBSUUsTUFBUSxVQUFVSixPQUFPRSxFQUFJRSxNQUFPLE1BQU1KLE9BQU9FLEVBQUlDLElBQUssS0FBT0QsRUFBSUMsSUFJakcsR0FBSVEsRUFBTWlCLFdBQ1JqQixFQUFNaUIsV0FBV0MsUUFBVVAsRUFBWXJCLEVBQU9FLE9BQ3pDLENBQ0wsSUFBSTJCLEVBQVV0RCxTQUFTdUQsZUFBZTVCLEdBQ2xDNkIsRUFBYXJCLEVBQU1xQixXQUVuQkEsRUFBVy9CLElBQ2JVLEVBQU1zQixZQUFZRCxFQUFXL0IsSUFHM0IrQixFQUFXekMsT0FDYm9CLEVBQU11QixhQUFhSixFQUFTRSxFQUFXL0IsSUFFdkNVLEVBQU1TLFlBQVlVLElBS3hCLFNBQVNLLEVBQVd4QixFQUFPMUMsRUFBU2lDLEdBQ2xDLElBQUlDLEVBQU1ELEVBQUlDLElBQ1ZDLEVBQVFGLEVBQUlFLE1BQ1pDLEVBQVlILEVBQUlHLFVBZXBCLEdBYklELEVBQ0ZPLEVBQU1NLGFBQWEsUUFBU2IsR0FFNUJPLEVBQU15QixnQkFBZ0IsU0FHcEIvQixHQUFhZ0MsT0FDZmxDLEdBQU8sdURBQXVESCxPQUFPcUMsS0FBS0MsU0FBU0MsbUJBQW1CQyxLQUFLQyxVQUFVcEMsTUFBZSxRQU1sSU0sRUFBTWlCLFdBQ1JqQixFQUFNaUIsV0FBV0MsUUFBVTFCLE1BQ3RCLENBQ0wsS0FBT1EsRUFBTStCLFlBQ1gvQixFQUFNc0IsWUFBWXRCLEVBQU0rQixZQUcxQi9CLEVBQU1TLFlBQVk1QyxTQUFTdUQsZUFBZTVCLEtBSTlDLElBQUl3QyxFQUFZLEtBQ1pDLEVBQW1CLEVBRXZCLFNBQVNuQyxFQUFTUCxFQUFLakMsR0FDckIsSUFBSTBDLEVBQ0FrQyxFQUNBbEIsRUFFSixHQUFJMUQsRUFBUTBFLFVBQVcsQ0FDckIsSUFBSUcsRUFBYUYsSUFDakJqQyxFQUFRZ0MsSUFBY0EsRUFBWWpDLEVBQW1CekMsSUFDckQ0RSxFQUFTbkIsRUFBb0J0RSxLQUFLLEtBQU11RCxFQUFPbUMsR0FBWSxHQUMzRG5CLEVBQVNELEVBQW9CdEUsS0FBSyxLQUFNdUQsRUFBT21DLEdBQVksUUFFM0RuQyxFQUFRRCxFQUFtQnpDLEdBQzNCNEUsRUFBU1YsRUFBVy9FLEtBQUssS0FBTXVELEVBQU8xQyxHQUV0QzBELEVBQVMsWUF4RmIsU0FBNEJoQixHQUUxQixHQUF5QixPQUFyQkEsRUFBTW9DLFdBQ1IsT0FBTyxFQUdUcEMsRUFBTW9DLFdBQVdkLFlBQVl0QixHQW1GekJxQyxDQUFtQnJDLElBS3ZCLE9BREFrQyxFQUFPM0MsR0FDQSxTQUFxQitDLEdBQzFCLEdBQUlBLEVBQVEsQ0FDVixHQUFJQSxFQUFPOUMsTUFBUUQsRUFBSUMsS0FBTzhDLEVBQU83QyxRQUFVRixFQUFJRSxPQUFTNkMsRUFBTzVDLFlBQWNILEVBQUlHLFVBQ25GLE9BR0Z3QyxFQUFPM0MsRUFBTStDLFFBRWJ0QixLQUtOaEcsRUFBT0QsUUFBVSxTQUFVK0QsRUFBTXhCLElBQy9CQSxFQUFVQSxHQUFXLElBR1IwRSxXQUEwQyxrQkFBdEIxRSxFQUFRMEUsWUFDdkMxRSxFQUFRMEUsVUFBWXRFLEtBSXRCLElBQUk2RSxFQUFrQjFELEVBRHRCQyxFQUFPQSxHQUFRLEdBQzBCeEIsR0FDekMsT0FBTyxTQUFnQmtGLEdBR3JCLEdBRkFBLEVBQVVBLEdBQVcsR0FFMkIsbUJBQTVDN0csT0FBT2tCLFVBQVU0RixTQUFTckgsS0FBS29ILEdBQW5DLENBSUEsSUFBSyxJQUFJdkgsRUFBSSxFQUFHQSxFQUFJc0gsRUFBZ0IzRCxPQUFRM0QsSUFBSyxDQUMvQyxJQUNJcUUsRUFBUWIsRUFESzhELEVBQWdCdEgsSUFFakN1RCxFQUFZYyxHQUFPSyxhQUtyQixJQUZBLElBQUkrQyxFQUFxQjdELEVBQWEyRCxFQUFTbEYsR0FFdENxRixFQUFLLEVBQUdBLEVBQUtKLEVBQWdCM0QsT0FBUStELElBQU0sQ0FDbEQsSUFFSUMsRUFBU25FLEVBRks4RCxFQUFnQkksSUFJSyxJQUFuQ25FLEVBQVlvRSxHQUFRakQsYUFDdEJuQixFQUFZb0UsR0FBUWhELFVBRXBCcEIsRUFBWXFFLE9BQU9ELEVBQVEsSUFJL0JMLEVBQWtCRyxNLGlCQ3hRdEIzSCxFQURrQyxFQUFRLEVBQ2hDK0gsRUFBNEIsSUFFOUJqRCxLQUFLLENBQUM3RSxFQUFPQyxFQUFJLDZtREFBa25ELEtBRTNvREQsRUFBT0QsUUFBVUEsRyw2QkNFakJDLEVBQU9ELFFBQVUsU0FBVWdJLEdBQ3pCLElBQUlqRSxFQUFPLEdBdURYLE9BckRBQSxFQUFLMkQsU0FBVyxXQUNkLE9BQU9PLEtBQUtDLEtBQUksU0FBVWhFLEdBQ3hCLElBQUk3QixFQXNEVixTQUFnQzZCLEVBQU04RCxHQUNwQyxJQUFJM0YsRUFBVTZCLEVBQUssSUFBTSxHQUVyQmlFLEVBQWFqRSxFQUFLLEdBRXRCLElBQUtpRSxFQUNILE9BQU85RixFQUdULEdBQUkyRixHQUFnQyxtQkFBVHJCLEtBQXFCLENBQzlDLElBQUl5QixHQVdXekQsRUFYZXdELEVBYTVCRSxFQUFTMUIsS0FBS0MsU0FBU0MsbUJBQW1CQyxLQUFLQyxVQUFVcEMsTUFDekQyRCxFQUFPLCtEQUErRGhFLE9BQU8rRCxHQUMxRSxPQUFPL0QsT0FBT2dFLEVBQU0sUUFkckJDLEVBQWFKLEVBQVdLLFFBQVFOLEtBQUksU0FBVU8sR0FDaEQsTUFBTyxpQkFBaUJuRSxPQUFPNkQsRUFBV08sWUFBYyxJQUFJcEUsT0FBT21FLEVBQVEsVUFFN0UsTUFBTyxDQUFDcEcsR0FBU2lDLE9BQU9pRSxHQUFZakUsT0FBTyxDQUFDOEQsSUFBZ0JyQyxLQUFLLE1BT3JFLElBQW1CcEIsRUFFYjBELEVBQ0FDLEVBUEosTUFBTyxDQUFDakcsR0FBUzBELEtBQUssTUF2RUo0QyxDQUF1QnpFLEVBQU04RCxHQUUzQyxPQUFJOUQsRUFBSyxHQUNBLFVBQVVJLE9BQU9KLEVBQUssR0FBSSxNQUFNSSxPQUFPakMsRUFBUyxLQUdsREEsS0FDTjBELEtBQUssS0FLVmhDLEVBQUs3RCxFQUFJLFNBQVVFLEVBQVN3SSxFQUFZQyxHQUNmLGlCQUFaekksSUFFVEEsRUFBVSxDQUFDLENBQUMsS0FBTUEsRUFBUyxNQUc3QixJQUFJMEksRUFBeUIsR0FFN0IsR0FBSUQsRUFDRixJQUFLLElBQUkzSSxFQUFJLEVBQUdBLEVBQUkrSCxLQUFLcEUsT0FBUTNELElBQUssQ0FFcEMsSUFBSWlFLEVBQUs4RCxLQUFLL0gsR0FBRyxHQUVQLE1BQU5pRSxJQUNGMkUsRUFBdUIzRSxJQUFNLEdBS25DLElBQUssSUFBSXlELEVBQUssRUFBR0EsRUFBS3hILEVBQVF5RCxPQUFRK0QsSUFBTSxDQUMxQyxJQUFJMUQsRUFBTyxHQUFHSSxPQUFPbEUsRUFBUXdILElBRXpCaUIsR0FBVUMsRUFBdUI1RSxFQUFLLE1BS3RDMEUsSUFDRzFFLEVBQUssR0FHUkEsRUFBSyxHQUFLLEdBQUdJLE9BQU9zRSxFQUFZLFNBQVN0RSxPQUFPSixFQUFLLElBRnJEQSxFQUFLLEdBQUswRSxHQU1kN0UsRUFBS2UsS0FBS1osTUFJUEgsSSw2Q0M5Q01nRixFQWRBLFNBQUNDLEdBV1osTUFSaUIsd0JBQUgsT0FMRyxlQUtILDJEQUVrQ0EsRUFGbEMsaURDTFpDLEVBQVEsSUFBSUMsSUFDWkMsRUFBUSx1RUFZQ0MsRUFWTyxTQUFDQyxHQU90QixPQUpLSixFQUFNSyxJQUFJRCxJQUNkSixFQUFNTSxJQUFJRixFQUFPRixFQUFNSyxLQUFLSCxJQUd0QkosRUFBTWxJLElBQUlzSSxJQ1BaSSxFQUFTLFNBQVRBLEVBQVVDLEdBV1osTUFSaUIsd0JBQUgsT0FDR0QsRUFBT0UsYUFEViwyQ0FFSkYsRUFBT0csY0FBY0YsR0FGakIsMkJBV2xCRCxFQUFPRSxhQUFlLGVBQ3RCRixFQUFPSSxZQUFjLHNCQUNyQkosRUFBT0ssWUFBYyxzQkFDckJMLEVBQU9NLGNBQWdCLHdCQUN2Qk4sRUFBT08sWUFBYyw2QkFFckJQLEVBQU9HLGNBQWdCLFNBQUNGLEdBQ3BCLElBQUlqSSxFQUFNLEVBRVYsT0FBT2lJLEVBQU9PLFFBQVEsU0FBQ0MsRUFBYWIsR0FDaEMsT0FBT2EsRUFBYyw0QkFBSCxPQUNEVCxFQUFPSyxZQUROLHFCQUM4QnJJLElBRDlCLDJDQUVJMkgsRUFBY0MsR0FBUyxHQUFJSSxFQUFPTyxZQUZ0QyxjQUV1RFgsRUFGdkQsaURBR0lJLEVBQU9NLGNBSFgsb0JDM0JKLFNEMkJJLDRDQU1uQixJQVBJLHVCQVFTTixFQUFPSSxZQVJoQixvQkN2QlcsU0R1Qlgsa0ZBV0lKLFFFckJBVSxFQWRBLFNBQUNDLEVBQU83SSxHQVduQixNQVJpQix5Q0FBSCxPQUxVLGlCQUtWLG9CQUNvREEsRUFEcEQsMEJBRUo2SSxFQUZJLDhCQ2VIQyxFQWZBLFdBWVgsTUFUaUIsd0JBQUgsT0FMRyxlQUtILDBCQUVKRixFQUFPLFlGVEYsT0VPRCx5QkFHSkEsRUFBTyxtQkZUSSxhRU1QLDJCQ1FIRyxFQWZPLFNBQUNDLEdBQ3RCLElBQU1yQyxFQUFNLENBQ1gsSUFBSyxRQUNMLElBQUssT0FDTCxJQUFLLE9BQ0wsSUFBSyxTQUNMLElBQUssU0FDTCxJQUFLLFVBS04sT0FBT3FDLEVBQU1DLFFBRkMsY0FFYyxTQUFDQyxHQUFELE9BQVd2QyxFQUFJdUMsTyxvaUJDUjVDLElBNkRlQyxFQXhERixTQUFDLEdBQW1CLElBQWRuSSxFQUFjLFFBQ2hDb0ksUUFBUUMsSUFBUiw0QkFFQSxJQUFJNUIsRUFBWXpHLEVBQVF5RyxVQUNwQjdFLEVBQUs2RSxFQUFVd0IsUUFBUSxNQUFPLElBQzlCZCxFQUFTbkgsRUFBUW1ILE9BQ2pCbUIsRUFBVyxhQUVUQyxFQUFPaEksU0FBU29DLGNBQWMsT0FDcEM0RixFQUFLdkYsYUFBYSxLQUFNcEIsR0FDeEIyRyxFQUFLdkYsYUFBYSxRQWZLLGtCQWlCdkIsSUFBTXdGLEVBQVcsb0JBQUgsT0FoQkksT0FnQkosaUNBZlEsWUFlUixzQkFHVGhDLEVBQU9DLEdBSEUscUJBSVRTLEVBQU9DLEdBSkUsNENBZFcsZUFjWCxzQkFPVFcsSUFQUyxvQ0FZZFMsRUFBS0UsVUFBWUQsRUF3QmpCLE9BRkFKLFFBQVFDLElBQVIsMEJBRU8sQ0FDTkUsT0FDQUcsVUFuQmlCLGtCQUFNdkIsR0FvQnZCd0IsVUFsQmlCLFNBQUNDLEdBQ2xCQSxFQUFZQSxFQUFVakQsS0FBSSxTQUFBbUIsR0FBSyxPQUFJaUIsRUFBY2pCLEVBQU0rQixXQUN4Q3RGLFFBQU8sU0FBQXVELEdBQUssTUFBYyxLQUFWQSxLQVRYLFNBQUNLLEdBQ041RyxTQUFTTSxjQUFjLElBQU1lLEVBQUssS0FBT3NGLEVBQU9FLGNBQ3hEcUIsVUFBWXZCLEVBQU9HLGNBQWNGLEdBVXhDMkIsQ0FEQTNCLEVBQVMsRUFBSXlCLElBRWJOLEVBQVNuQixJQWFUNEIsVUFWaUIsU0FBQ0MsR0FDbEJWLEVBQVdVLEtDakNFQyxFQWJRLFdBTXRCLElBTEEsSUFScUJDLEVBQUtDLEVBUXBCQyxFQUFRLDZCQUNSQyxHQVRlSCxFQVNjLEVBVFRDLEVBU1ksR0FSdENELEVBQU1JLEtBQUtDLEtBQUtMLEdBQ2hCQyxFQUFNRyxLQUFLRSxNQUFNTCxHQUVWRyxLQUFLRSxNQUFNRixLQUFLRyxVQUFZTixFQUFNRCxJQUFRQSxHQU83Q1EsRUFBVSxHQUVML0wsRUFBSSxFQUFHQSxFQUFJMEwsRUFBZTFMLElBQ2xDK0wsR0FBV04sRUFBTUUsS0FBS0UsTUFBTUYsS0FBS0csU0FBV0wsRUFBTTlILFNBR25ELE9BQU9vSSxFQUFVLGMscVZDWmxCLElBV01DLEVBQVcsQ0FDaEIsZUFBZ0IsU0FBQ2hKLEVBQVFpSixHQUN4QixJQUFNQyxFQUFNbEosRUFBT21FLFdBQVdnRixRQUFRNUssSUFDaENpSSxFQUFTeUMsRUFBUWxCLFlBQ3ZCdkIsRUFBTzVCLE9BQU9zRSxFQUFLLEdBQ25CRCxFQUFRakIsVUFBVXhCLElBRW5CLFlBQWEsU0FBQ3hHLEVBQVFpSixHQUNyQixJQUFNekMsRUFBU3lDLEVBQVFsQixZQUNqQnFCLEVBQVdkLElBQ2pCOUIsRUFBTzVFLEtBQUt3SCxHQUNaSCxFQUFRakIsVUFBVXhCLElBRW5CLGtCQUFtQixTQUFDeEcsRUFBUWlKLEVBQVNJLEdBQ3BDLElBQUlsSSxFQUFRLEVBRUc4SCxFQUFRbEIsWUFDaEIzRixTQUFRLFNBQUMrRCxHQUNYRCxFQUFjQyxJQUNqQmhGLE9BSUZtSSxNQUFNLHdCQUEwQm5JLElBRWpDLGlCQ3pDZ0IsU0FBQ29JLEVBQUlDLEVBQVNDLEdBQzlCLElBQUlDLEVBRUosT0FBTyxXQUNOLElBQUlDLEVBQVU1RSxLQUNWNkUsRUFBT0MsVUFFUEMsRUFBUSxXQUNYSixFQUFZLEtBRVBELEdBQ0pGLEVBQUdRLE1BQU1KLEVBQVNDLElBSWhCSSxFQUFVUCxJQUFZQyxFQUMxQk8sYUFBYVAsR0FDYkEsRUFBWVEsV0FBV0osRUFBT04sR0FFMUJRLEdBQ0hULEVBQUdRLE1BQU1KLEVBQVNDLElEcUJGTyxFQUFTLFNBQVNuSyxFQUFRaUosRUFBU0ksR0FDcEQ1QixRQUFRQyxJQUFJLGVBRVosSUFBTW5KLEVBQU04SyxFQUFNZSxPQUFTZixFQUFNZ0IsUUFFakMsR0U5Q21CLEtGOENmOUwsR0U3Q2UsTUY2Q0VBLEVBQWUsQ0FDbkMsSUFBTTZLLEVBQVdwSixFQUFPL0IsTUFHeEIsR0FGQStCLEVBQU8vQixNQUFRLEdBRVhtTCxTQUE0RCxLQUFiQSxFQUNsRCxPQUdELElBQU01QyxFQUFTeUMsRUFBUWxCLFlBQ3ZCdkIsRUFBTzVFLEtBQUt3SCxHQUNaSCxFQUFRakIsVUFBVXhCLE1BR2pCLEtBQUssR0FDUixlQUFnQixTQUFDeEcsRUFBUWlKLEVBQVNJLEdBQ2hDLElBQUlwQixHQUFhb0IsRUFBTWlCLGVBQWlCM0ssT0FBTzJLLGVBQWVDLFFBQVEsUUFFdEUsR0FBSXRDLFNBQStELEtBQWRBLEVBQXJELENBSUFBLEVBQVlBLEVBQVV1QyxNQUFNLEtBQzVCLElBQU1oRSxFQUFTeUMsRUFBUWxCLFlBRXZCa0IsRUFBUWpCLFVBQVIsWUFBc0J4QixHQUF0QixFQUFpQ3lCLE9BRW5DLGtCQUFtQixTQUFDakksRUFBUWlKLEVBQVNJLEdBQ3BDLElBQU1ELEVBQVdwSixFQUFPL0IsTUFHeEIsR0FGQStCLEVBQU8vQixNQUFRLEdBRVhtTCxTQUE0RCxLQUFiQSxFQUFuRCxDQUlBLElBQU01QyxFQUFTeUMsRUFBUWxCLFlBQ3ZCdkIsRUFBTzVFLEtBQUt3SCxHQUNaSCxFQUFRakIsVUFBVXhCLE1BSUxpRSxFQWpGQSxTQUFTcE0sRUFBSXFNLEVBQU0xSyxFQUFRaUosR0FDekMsSUFDTTBCLEVBQVUzQixFQURDMEIsRUFBTyxJQUFNck0sR0FHUCxtQkFBWnNNLEdBSVhBLEVBQVEzSyxFQUFRaUosRUFBU0ksUUdPWHVCLEVBbEJFLENBQ2JDLFNBQVUsU0FBU0MsRUFBU0MsRUFBUTlCLEdBQ2hDOEIsRUFBTzNJLFNBQVEsU0FBQ2lILEdBQ1p5QixFQUFRRSxpQkFBaUIzQixHQUFPLFNBQUNBLEdBQzdCQSxFQUFNNEIsa0JBRU4sSUFBTWpMLEVBQVNxSixFQUFNckosT0FDZjBLLEVBQU9yQixFQUFNcUIsS0FDYlEsRUFBWWxMLEVBQU9tSixRQUFROUssR0FJakNvTSxFQUFPUyxFQUFXUixFQUFNMUssRUFBUWlKLFcsb1hDa0JqQ2pLLFVBckJNLFNBQUMsR0FBOEIsSUFBNUJtTSxFQUE0QixFQUE1QkEsVUFBYzlMLEVBQWMsbUJBQ25Eb0ksUUFBUUMsSUFBUixnREFBcUR5RCxFQUFVbEssR0FBL0QseUJBQWtGMkMsS0FBS0MsVUFBVXhFLEtBRWpHLElBQU0rTCxFQUFRQyxZQUFZQyxNQUh5QixFQUtEOUQsRUFBS25JLEdBQS9DdUksRUFMMkMsRUFLM0NBLEtBQU1HLEVBTHFDLEVBS3JDQSxVQUFXQyxFQUwwQixFQUsxQkEsVUFBV0ksRUFMZSxFQUtmQSxVQUNwQytDLEVBQVVJLE9BQU8zRCxHQUVqQmdELEVBQVNDLFNBQVNqRCxFQUFNLENBQUMsUUFBUyxVQUFXLFdBQVksU0FBVSxDQUFDSSxZQUFVRCxjQUU5RSxJQUFNeUQsRUFBTUgsWUFBWUMsTUFJeEIsT0FGQTdELFFBQVFDLElBQVIsMkRBQWdFckksRUFBUXlHLFVBQXhFLG9CQUE2RjZDLEtBQUtDLEtBQUs0QyxFQUFNSixHQUE3RyxRQUVPLENBQ05yRCxZQUNBQyxZQUNBSSIsImZpbGUiOiJlbWFpbHMtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgRW1haWxzRWRpdG9yID0gcmVxdWlyZSgnLi9pbmRleCcpLmRlZmF1bHQ7XG5cbm1vZHVsZS5leHBvcnRzID0gRW1haWxzRWRpdG9yOyIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbWFpbi5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVkOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuZm9ybS1jb250YWluZXJ7d2lkdGg6NjAwcHg7aGVpZ2h0OjQwMHB4O21hcmdpbjoyMHB4fS5mb3Jte2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Ym94LXNoYWRvdzowIDEwcHggMjBweCAwIHJnYmEoMCwwLDAsMC4zKTtib3JkZXItcmFkaXVzOjE2cHggMTZweCAxNnB4IDE2cHg7Zm9udDo0MDAgMTRweC8yNHB4IE9wZW4gU2FucyxzYW5zLXNlcmlmfS5mb3JtX190b3B7ZmxleDowIDEgMjUwcHg7cGFkZGluZzo1MHB4IDUwcHggMHB4IDUwcHg7Ym9yZGVyLXJhZGl1czoxNnB4IDE2cHggMHB4IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjd9LmZvcm1fX2JvdHRvbXtmbGV4OjAgMSA3NXB4O3BhZGRpbmc6MTIuNXB4IDUwcHggMTIuNXB4IDUwcHg7Ym9yZGVyLXJhZGl1czowcHggMHB4IDE2cHggMTZweDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDthbGlnbi1pdGVtczpjZW50ZXJ9LmZvcm1fX2hlYWRlcntoZWlnaHQ6NTBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZToyMHB4fS5mb3JtX19oZWFkZXIgLmJvbGQtdGV4dHtmb250LXdlaWdodDpib2xkfS5mb3JtX19lZGl0b3J7aGVpZ2h0OjE3MHB4O21pbi13aWR0aDo1MDBweDttYXJnaW4tYm90dG9tOjMwcHg7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWNvbnRlbnQ6ZmxleC1zdGFydDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2MzYzFkMDtmbG9hdDpsZWZ0O292ZXJmbG93OmF1dG99LmZvcm1fX2VkaXRvcl9faW5wdXR7ZGlzcGxheTppbmxpbmUtYmxvY2s7ZmxleDoxIDEgYXV0bzttYXJnaW46M3B4O2JvcmRlcjpub25lO291dGxpbmU6bm9uZTtsaW5lLWhlaWdodDoyNHB4fS5mb3JtX19lZGl0b3JfX2VtYWlse2JhY2tncm91bmQtY29sb3I6I2UwZWFmZjtkaXNwbGF5OmZsZXg7cGFkZGluZzowcHggMTBweDttYXJnaW46NXB4IDNweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjEycHg7b3V0bGluZTpub25lO2xpbmUtaGVpZ2h0OjI0cHh9LmZvcm1fX2VkaXRvcl9fcmVtb3Zlcjo6YWZ0ZXJ7Y29udGVudDpcXFwiw5dcXFwiO2ZvbnQtc2l6ZTpsYXJnZTtwYWRkaW5nOjBweCA1cHg7Y3Vyc29yOnBvaW50ZXJ9LmZvcm1fX2VkaXRvcl9fZW1haWwtLWVycm9ye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgcmVkfS5jbGVhcmZpeDo6YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIjtjbGVhcjpib3RoO2Rpc3BsYXk6YmxvY2t9LmZvcm1fX2Zvb3RlcntoZWlnaHQ6MTAwJTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24taXRlbXM6Y2VudGVyfS5idXR0b25fcHJpbWFyeXtjb2xvcjp3aGl0ZTtiYWNrZ3JvdW5kLWNvbG9yOiM0MjYyRkY7Ym9yZGVyLWNvbG9yOiM0MjYyRkY7Ym9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjFweCBzb2xpZDtwYWRkaW5nOjEwcHggMjBweCAxMHB4IDIwcHg7bWFyZ2luOjBweCAxMHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQ6NDAwIDE0cHgvMjRweCBPcGVuIFNhbnMsc2Fucy1zZXJpZjtjdXJzb3I6cG9pbnRlcn1cXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IEhFQURFUl9DTEFTUyA9IFwiZm9ybV9faGVhZGVyXCI7XG5cbmNvbnN0IEhlYWRlciA9IChib2FyZE5hbWUpID0+IHtcblx0Ly8gY29uc29sZS5sb2coYEJ1aWxkIC0tIFtIZWFkZXJdIC0tIHN0YXJ0YCk7XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz0ke0hFQURFUl9DTEFTU30+XG4gICAgICAgICAgICBTaGFyZSA8c3BhbiBjbGFzcz1cImJvbGQtdGV4dFwiPiBcXHUwMEEwICR7Ym9hcmROYW1lfSBcXHUwMEEwIDwvc3Bhbj4gd2l0aCBvdGhlcnNcbiAgICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbSGVhZGVyXSAtLSBlbmRgKTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG5jb25zdCByZWdleCA9IC9eW2EtekEtWjAtOS4hIyQlJuKAmSorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05LV0rKD86XFwuW2EtekEtWjAtOS1dKykqJC87XG5cbmNvbnN0IHZhbGlkYXRlRW1haWwgPSAoZW1haWwpID0+IHtcblx0Ly8gY29uc29sZS5sb2coXCJjYWNoZWVkIDogXCIsIGNhY2hlLmhhcyhlbWFpbCkpO1xuXG5cdGlmICghY2FjaGUuaGFzKGVtYWlsKSkge1xuXHRcdGNhY2hlLnNldChlbWFpbCwgcmVnZXgudGVzdChlbWFpbCkpO1xuXHR9XG5cblx0cmV0dXJuIGNhY2hlLmdldChlbWFpbCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZUVtYWlsOyIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQge1JFTU9WRSwgUkVDT1JEfSBmcm9tIFwiLi4vZXZlbnRzL05hbWVTcGFjZVwiO1xuaW1wb3J0IHZhbGlkYXRlRW1haWwgZnJvbSBcIi4uL3V0aWxzL3ZhbGlkYXRlRW1haWxcIjtcblxuY29uc3QgRWRpdG9yID0gKGVtYWlscykgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbRWRpdG9yXSAtLSBzdGFydGApO1xuICAgIFxuICAgIGNvbnN0IHRlbXBsYXRlID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPSR7RWRpdG9yLkVESVRPUl9DTEFTU30gZGF0YS1ucz1cImVkaXRvclwiPlxuICAgICAgICAgICAgJHtFZGl0b3IuaW5uZXJUZW1wbGF0ZShlbWFpbHMpfVxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gY29uc29sZS5sb2coYEJ1aWxkIC0tIFtFZGl0b3JdIC0tIGVuZGApO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufTtcblxuRWRpdG9yLkVESVRPUl9DTEFTUyA9IFwiZm9ybV9fZWRpdG9yXCI7XG5FZGl0b3IuSU5QVVRfQ0xBU1MgPSBcImZvcm1fX2VkaXRvcl9faW5wdXRcIjtcbkVkaXRvci5FTUFJTF9DTEFTUyA9IFwiZm9ybV9fZWRpdG9yX19lbWFpbFwiO1xuRWRpdG9yLlJFTU9WRVJfQ0xBU1MgPSBcImZvcm1fX2VkaXRvcl9fcmVtb3ZlclwiO1xuRWRpdG9yLkVSUk9SX0NMQVNTID0gXCJmb3JtX19lZGl0b3JfX2VtYWlsLS1lcnJvclwiO1xuXG5FZGl0b3IuaW5uZXJUZW1wbGF0ZSA9IChlbWFpbHMpID0+IHtcbiAgICBsZXQga2V5ID0gMDtcbiAgICBcbiAgICByZXR1cm4gZW1haWxzLnJlZHVjZSggKGFjY3VtdWxhdG9yLCBlbWFpbCkgPT4ge1xuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3IgKyBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSR7RWRpdG9yLkVNQUlMX0NMQVNTfSBkYXRhLWtleT0ke2tleSsrfT4gXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9JHt2YWxpZGF0ZUVtYWlsKGVtYWlsKSA/IFwiXCI6IEVkaXRvci5FUlJPUl9DTEFTU30gPiAke2VtYWlsfSA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9JHtFZGl0b3IuUkVNT1ZFUl9DTEFTU30gZGF0YS1ucz0ke1JFTU9WRX0+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGBcbiAgICB9LCBcIlwiKSArIFxuICAgIGA8aW5wdXQgY2xhc3M9JHtFZGl0b3IuSU5QVVRfQ0xBU1N9IGRhdGEtbnM9JHtSRUNPUkR9IHR5cGU9XCJ0ZXh0XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiIHBsYWNlaG9sZGVyPVwiYWRkIG1vcmUgcGVvcGxlLi4uXCI+PC9pbnB1dD5gXG59O1xuXG5leHBvcnQgZGVmYXVsdCBFZGl0b3I7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBjb25zdCBSRU1PVkUgPSBcIlJFTU9WRVwiO1xuZXhwb3J0IGNvbnN0IEFERCA9IFwiQUREXCI7XG5leHBvcnQgY29uc3QgR0VUX0NPVU5UID0gXCJHRVRfQ09VTlRcIjtcbmV4cG9ydCBjb25zdCBSRUNPUkQgPSBcIlJFQ09SRFwiOyIsIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBCVVRUT05fUFJJTUFSWV9DTEFTUz0gXCJidXR0b25fcHJpbWFyeVwiO1xuXG5jb25zdCBCdXR0b24gPSAobGFiZWwsIG5zKSA9PiB7XG5cdC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbQnV0dG9uXSAtLSBzdGFydGApO1xuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBgXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPSR7QlVUVE9OX1BSSU1BUllfQ0xBU1N9IGRhdGEtbnM9JHtuc30+XG4gICAgICAgICAgICAke2xhYmVsfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICBgO1xuXG4gICAgLy8gY29uc29sZS5sb2coYEJ1aWxkIC0tIFtCdXR0b25dIC0tIGVuZGApO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uOyIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuL0J1dHRvblwiO1xuaW1wb3J0IHsgQURELCBHRVRfQ09VTlQgfSBmcm9tIFwiLi4vZXZlbnRzL05hbWVTcGFjZVwiO1xuXG5jb25zdCBGT09URVJfQ0xBU1MgPSBcImZvcm1fX2Zvb3RlclwiO1xuXG5jb25zdCBGb290ZXIgPSAoKSA9PiB7XG5cdC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbRm9vdGVyXSAtLSBzdGFydGApO1xuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9JHtGT09URVJfQ0xBU1N9PlxuICAgICAgICAgICAgJHtCdXR0b24oXCJBZGQgZW1haWxcIiwgQUREKX1cbiAgICAgICAgICAgICR7QnV0dG9uKFwiR2V0IGVtYWlscyBjb3VudFwiLCBHRVRfQ09VTlQpfVxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gY29uc29sZS5sb2coYEJ1aWxkIC0tIFtGb290ZXJdIC0tIGVuZGApO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9vdGVyOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBFc2NhcGUgdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXJzIHdpdGggSFRNTCBlbnRpdHkgZW5jb2RpbmcgdG8gcHJldmVudCBzd2l0Y2hpbmcgaW50byBhbnkgZXhlY3V0aW9uIGNvbnRleHRcbmNvbnN0IHNhbml0aXplSW5wdXQgPSAoaW5wdXQpID0+IHtcblx0Y29uc3QgbWFwID0ge1xuXHRcdFwiJlwiOiBcIiZhbXA7XCIsXG5cdFx0XCI8XCI6IFwiJmx0O1wiLFxuXHRcdFwiPlwiOiBcIiZndDtcIixcblx0XHQnXCInOiBcIiZxdW90O1wiLFxuXHRcdFwiJ1wiOiBcIiYjeDI3O1wiLFxuXHRcdFwiL1wiOiBcIiYjeDJGO1wiXG5cdH07XG5cblx0Y29uc3QgcmVnZXggPSAvWyY8PlwiJy9dL2dpO1xuXG5cdHJldHVybiBpbnB1dC5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gpID0+IG1hcFttYXRjaF0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgc2FuaXRpemVJbnB1dDtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgSGVhZGVyIGZyb20gXCIuL0hlYWRlclwiO1xuaW1wb3J0IEVkaXRvciBmcm9tIFwiLi9FZGl0b3JcIjtcbmltcG9ydCBGb290ZXIgZnJvbSBcIi4vRm9vdGVyXCI7XG5pbXBvcnQgc2FuaXRpemVJbnB1dCBmcm9tIFwiLi4vc2VjdXJpdHkvc2FuaXRpemVJbnB1dFwiO1xuXG5jb25zdCBDT05UQUlORVJfQ0xBU1MgPSBcImZvcm0tY29udGFpbmVyXCI7XG5jb25zdCBGT1JNX0NMQVNTID0gXCJmb3JtXCI7XG5jb25zdCBGT1JNX1RPUF9DTEFTUyA9IFwiZm9ybV9fdG9wXCI7XG5jb25zdCBGT1JNX0JPVFRPTV9DTEFTUyA9IFwiZm9ybV9fYm90dG9tXCI7XG5cbmNvbnN0IEZvcm0gPSAoeyAuLi5vcHRpb25zIH0pID0+IHtcblx0Y29uc29sZS5sb2coYEJ1aWxkIC0tIFtGb3JtXSAtLSBzdGFydGApO1xuXG5cdGxldCBib2FyZE5hbWUgPSBvcHRpb25zLmJvYXJkTmFtZTtcblx0bGV0IGlkID0gYm9hcmROYW1lLnJlcGxhY2UoL1xccy9nLCAnJyk7IFxuXHRsZXQgZW1haWxzID0gb3B0aW9ucy5lbWFpbHM7XG5cdGxldCBjYWxsYmFjayA9ICgpID0+IHt9O1xuXG5cdGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRmb3JtLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcblx0Zm9ybS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBDT05UQUlORVJfQ0xBU1MpO1xuXG5cdGNvbnN0IHRlbXBsYXRlID0gYFxuXHRcdDxkaXYgY2xhc3M9JHtGT1JNX0NMQVNTfT5cdFxuXHRcdFx0PGRpdiBjbGFzcz0ke0ZPUk1fVE9QX0NMQVNTfT5cblx0XHRcdFx0JHtIZWFkZXIoYm9hcmROYW1lKX1cblx0XHRcdFx0JHtFZGl0b3IoZW1haWxzKX1cblx0XHRcdDwvZGl2PlxuXHRcdFx0PGRpdiBjbGFzcz0ke0ZPUk1fQk9UVE9NX0NMQVNTfT5cblx0XHRcdFx0JHtGb290ZXIoKX1cblx0XHRcdDwvZGl2PlxuXHRcdDwvZGl2PlxuICAgIGA7XG5cblx0Zm9ybS5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcblxuXHRjb25zdCByZW5kZXJFbWFpbHMgPSAoZW1haWxzKSA9PiB7XHRcblx0XHRjb25zdCBlZGl0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGlkICsgJyAuJyArIEVkaXRvci5FRElUT1JfQ0xBU1MpO1xuXHRcdGVkaXRvci5pbm5lckhUTUwgPSBFZGl0b3IuaW5uZXJUZW1wbGF0ZShlbWFpbHMpO1xuXHR9XG5cblx0Y29uc3QgZ2V0RW1haWxzID0gKCkgPT4gZW1haWxzO1xuXG5cdGNvbnN0IHNldEVtYWlscyA9IChuZXdFbWFpbHMpID0+IHtcblx0XHRuZXdFbWFpbHMgPSBuZXdFbWFpbHMubWFwKGVtYWlsID0+IHNhbml0aXplSW5wdXQoZW1haWwudHJpbSgpKSlcblx0XHRcdFx0ICAgICAgICAgICAgLmZpbHRlcihlbWFpbCA9PiBlbWFpbCAhPT0gXCJcIik7XG5cblx0XHRlbWFpbHMgPSBbLi4ubmV3RW1haWxzXTtcblx0XHRyZW5kZXJFbWFpbHMoZW1haWxzKTtcblx0XHRjYWxsYmFjayhlbWFpbHMpO1xuXHR9O1xuXG5cdGNvbnN0IHN1YnNjcmliZSA9IChuZXdDYWxsYmFjaykgPT4ge1xuXHRcdGNhbGxiYWNrID0gbmV3Q2FsbGJhY2s7XG5cdH1cblxuXHRjb25zb2xlLmxvZyhgQnVpbGQgLS0gW0Zvcm1dIC0tIGVuZGApO1xuXG5cdHJldHVybiB7XG5cdFx0Zm9ybSxcblx0XHRnZXRFbWFpbHMsXG5cdFx0c2V0RW1haWxzLFxuXHRcdHN1YnNjcmliZVxuXHR9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybTsiLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgZ2V0UmFuZG9tSW50ID0gKG1pbiwgbWF4KSA9PiB7XG5cdG1pbiA9IE1hdGguY2VpbChtaW4pO1xuXHRtYXggPSBNYXRoLmZsb29yKG1heCk7XG5cblx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbn07XG5cbmNvbnN0IGdldFJhbmRvbUVtYWlsID0gKCkgPT4ge1xuXHRjb25zdCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcblx0Y29uc3QgYWNjb3VudExlbmd0aCA9IGdldFJhbmRvbUludCg0LCAxMCk7XG5cblx0bGV0IGFjY291bnQgPSBcIlwiO1xuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYWNjb3VudExlbmd0aDsgaSsrKSB7XG5cdFx0YWNjb3VudCArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcblx0fVxuXG5cdHJldHVybiBhY2NvdW50ICsgXCJAZ21haWwuY29tXCI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRSYW5kb21FbWFpbDtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBFTlRFUiwgQ09NTUEgfSBmcm9tIFwiLi9LZXlzXCI7XG5pbXBvcnQgZ2V0UmFuZG9tRW1haWwgZnJvbSBcIi4uL3V0aWxzL2dldFJhbmRvbUVtYWlsXCI7XG5pbXBvcnQgdmFsaWRhdGVFbWFpbCBmcm9tIFwiLi4vdXRpbHMvdmFsaWRhdGVFbWFpbFwiO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gXCIuLi91dGlscy9kZWJvdW5jZVwiO1xuXG5jb25zdCBoYW5kbGUgPSBmdW5jdGlvbihucywgdHlwZSwgdGFyZ2V0LCBhY3Rpb25zKSB7XG5cdGNvbnN0IGV2ZW50S2V5ID0gdHlwZSArIFwiLlwiICsgbnM7XG5cdGNvbnN0IGhhbmRsZXIgPSBFdmVudE1hcFtldmVudEtleV07XG5cblx0aWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRoYW5kbGVyKHRhcmdldCwgYWN0aW9ucywgZXZlbnQpO1xufTtcblxuY29uc3QgRXZlbnRNYXAgPSB7XG5cdFwiY2xpY2suUkVNT1ZFXCI6ICh0YXJnZXQsIGFjdGlvbnMpID0+IHtcblx0XHRjb25zdCBpZHggPSB0YXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LmtleTtcblx0XHRjb25zdCBlbWFpbHMgPSBhY3Rpb25zLmdldEVtYWlscygpO1xuXHRcdGVtYWlscy5zcGxpY2UoaWR4LCAxKTtcblx0XHRhY3Rpb25zLnNldEVtYWlscyhlbWFpbHMpO1xuXHR9LFxuXHRcImNsaWNrLkFERFwiOiAodGFyZ2V0LCBhY3Rpb25zKSA9PiB7XG5cdFx0Y29uc3QgZW1haWxzID0gYWN0aW9ucy5nZXRFbWFpbHMoKTtcblx0XHRjb25zdCBuZXdFbWFpbCA9IGdldFJhbmRvbUVtYWlsKCk7XG5cdFx0ZW1haWxzLnB1c2gobmV3RW1haWwpO1xuXHRcdGFjdGlvbnMuc2V0RW1haWxzKGVtYWlscyk7XG5cdH0sXG5cdFwiY2xpY2suR0VUX0NPVU5UXCI6ICh0YXJnZXQsIGFjdGlvbnMsIGV2ZW50KSA9PiB7XG5cdFx0bGV0IGNvdW50ID0gMDtcblxuXHRcdGNvbnN0IGVtYWlscyA9IGFjdGlvbnMuZ2V0RW1haWxzKCk7XG5cdFx0ZW1haWxzLmZvckVhY2goKGVtYWlsKSA9PiB7XG5cdFx0XHRpZiAodmFsaWRhdGVFbWFpbChlbWFpbCkpIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFsZXJ0KFwiVmFsaWQgZW1haWxzIGNvdW50IDogXCIgKyBjb3VudCk7XG5cdH0sXG5cdFwia2V5ZG93bi5SRUNPUkRcIjogZGVib3VuY2UoZnVuY3Rpb24odGFyZ2V0LCBhY3Rpb25zLCBldmVudCkge1xuXHRcdGNvbnNvbGUubG9nKFwia2V5IGhhbmRsZXJcIik7XG5cblx0XHRjb25zdCBrZXkgPSBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlO1xuXG5cdFx0aWYgKGtleSA9PT0gRU5URVIgfHwga2V5ID09PSBDT01NQSkge1xuXHRcdFx0Y29uc3QgbmV3RW1haWwgPSB0YXJnZXQudmFsdWU7XG5cdFx0XHR0YXJnZXQudmFsdWUgPSBcIlwiO1xuXG5cdFx0XHRpZiAobmV3RW1haWwgPT09IG51bGwgfHwgbmV3RW1haWwgPT09IHVuZGVmaW5lZCB8fCBuZXdFbWFpbCA9PT0gXCJcIiApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBlbWFpbHMgPSBhY3Rpb25zLmdldEVtYWlscygpO1xuXHRcdFx0ZW1haWxzLnB1c2gobmV3RW1haWwpO1xuXHRcdFx0YWN0aW9ucy5zZXRFbWFpbHMoZW1haWxzKTtcblx0XHR9XG5cblx0fSwgMzAwLCBmYWxzZSksXG5cdFwicGFzdGUuUkVDT1JEXCI6ICh0YXJnZXQsIGFjdGlvbnMsIGV2ZW50KSA9PiB7XG5cdFx0XHRsZXQgbmV3RW1haWxzID0gKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGEpLmdldERhdGEoXCJ0ZXh0XCIpO1xuXG5cdFx0XHRpZiAobmV3RW1haWxzID09PSBudWxsIHx8IG5ld0VtYWlscyA9PT0gdW5kZWZpbmVkIHx8IG5ld0VtYWlscyA9PT0gXCJcIiApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRuZXdFbWFpbHMgPSBuZXdFbWFpbHMuc3BsaXQoXCIsXCIpO1xuXHRcdFx0Y29uc3QgZW1haWxzID0gYWN0aW9ucy5nZXRFbWFpbHMoKTtcblxuXHRcdFx0YWN0aW9ucy5zZXRFbWFpbHMoWy4uLmVtYWlscywgLi4ubmV3RW1haWxzXSk7XHRcblx0fSxcblx0XCJmb2N1c291dC5SRUNPUkRcIjogKHRhcmdldCwgYWN0aW9ucywgZXZlbnQpID0+IHtcblx0XHRjb25zdCBuZXdFbWFpbCA9IHRhcmdldC52YWx1ZTtcblx0XHR0YXJnZXQudmFsdWUgPSBcIlwiO1xuXG5cdFx0aWYgKG5ld0VtYWlsID09PSBudWxsIHx8IG5ld0VtYWlsID09PSB1bmRlZmluZWQgfHwgbmV3RW1haWwgPT09IFwiXCIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBlbWFpbHMgPSBhY3Rpb25zLmdldEVtYWlscygpO1xuXHRcdGVtYWlscy5wdXNoKG5ld0VtYWlsKTtcblx0XHRhY3Rpb25zLnNldEVtYWlscyhlbWFpbHMpO1xuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBoYW5kbGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgZGVib3VuY2UgPSAoZngsIHRpbWVvdXQsIGxlYWRpbmcpID0+IHtcblx0bGV0IF9fdGltZW91dDtcblxuXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0bGV0IGNvbnRleHQgPSB0aGlzO1xuXHRcdGxldCBhcmdzID0gYXJndW1lbnRzO1xuXG5cdFx0bGV0IGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRfX3RpbWVvdXQgPSBudWxsO1xuXG5cdFx0XHRpZiAoIWxlYWRpbmcpIHtcblx0XHRcdFx0ZnguYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHRsZXQgY2FsbE5vdyA9IGxlYWRpbmcgJiYgIV9fdGltZW91dDtcblx0XHRjbGVhclRpbWVvdXQoX190aW1lb3V0KTtcblx0XHRfX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB0aW1lb3V0KTtcblxuXHRcdGlmIChjYWxsTm93KSB7XG5cdFx0XHRmeC5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHR9XG5cdH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRlYm91bmNlOyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgY29uc3QgRU5URVIgPSAxMztcbmV4cG9ydCBjb25zdCBDT01NQSA9IDE4ODsiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IGhhbmRsZSBmcm9tIFwiLi9IYW5kbGVyc1wiO1xuXG5jb25zdCBMaXN0ZW5lciA9IHtcbiAgICBsaXN0ZW5PbjogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnRzLCBhY3Rpb25zKSB7XG4gICAgICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LFx0KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGV2ZW50LnR5cGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZVNwYWNlID0gdGFyZ2V0LmRhdGFzZXQubnM7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYCR7dHlwZX0gb24gJHtuYW1lU3BhY2V9YCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaGFuZGxlKG5hbWVTcGFjZSwgdHlwZSwgdGFyZ2V0LCBhY3Rpb25zKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMaXN0ZW5lcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IFwiLi9zdHlsZXMvbWFpbi5zY3NzXCI7XG5pbXBvcnQgRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1cIjtcbmltcG9ydCBMaXN0ZW5lciBmcm9tIFwiLi9ldmVudHMvTGlzdGVuZXJcIjtcblxuLyoqXG4gKiBFbWFpbHNFZGl0b3IgcmVuZGVyIGEgZm9ybSBiYXNlZCwgaW4gd2hpY2ggdXNlciBjYW4gdHlwZSBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjaWZpY2F0aW9uIC0gc3BlY2lmaWNhdGlvbiB1c2VkIHRvIGRlc2NyaWJlIHdoZXJlIHRoZSBmb3JtIHNob3VsZCBiZSByZW5kZXJlZCBhbmQgd2hhdCB0byBiZSBkaXNwbGF5ZWQsXG4gKiBcdFx0XHRcdFx0XHRcdFx0ICAgaW5jbHVkaW5nIG5hbWUgb2YgdGhlIGJvYXJkIGFuZCBlbWFpbHMgc2hvd24gaW4gdGhlIGVkaXRvclxuICogQHJldHVybiB7T2JqZWN0fSAtIGZvcm0gb2JqZWN0LCBpbmNsdWRpbmcgdGhlIGZvcm0gRE9NIG9iamVjdCBhbmQgQVBJIHRvIGdldCBhbmQgc2V0IGVtYWlscywgYXMgd2VsbCBhcyB0byBzdWJzY3JpYmUgdG8gY2hhbmdlc1xuICovXG5jb25zdCBFbWFpbHNFZGl0b3IgPSAoeyBjb250YWluZXIsIC4uLm9wdGlvbnMgfSkgPT4ge1xuXHRjb25zb2xlLmxvZyhgUmVuZGVyIC0tIFtFbWFpbHNFZGl0b3JdIC0tIFJlbmRlciBpbiAke2NvbnRhaW5lci5pZH0gd2l0aCBvcHRpb25zICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9YCk7XG5cblx0Y29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuXHRjb25zdCB7IGZvcm0sIGdldEVtYWlscywgc2V0RW1haWxzLCBzdWJzY3JpYmUgfSA9IEZvcm0ob3B0aW9ucyk7XG5cdGNvbnRhaW5lci5hcHBlbmQoZm9ybSk7XG5cblx0TGlzdGVuZXIubGlzdGVuT24oZm9ybSwgW1wiY2xpY2tcIiwgXCJrZXlkb3duXCIsIFwiZm9jdXNvdXRcIiwgXCJwYXN0ZVwiXSwge3NldEVtYWlscyxnZXRFbWFpbHN9KTtcblxuXHRjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuXHRjb25zb2xlLmxvZyhgUmVuZGVyIC0tIFtFbWFpbHNFZGl0b3JdIC0tIEZpbmlzaGluZyByZW5kZXJpbmcgIyR7b3B0aW9ucy5ib2FyZE5hbWV9IyB3aXRoaW4gJHtNYXRoLmNlaWwoZW5kIC0gc3RhcnQpfSBtc2ApO1xuXG5cdHJldHVybiB7XG5cdFx0Z2V0RW1haWxzLFxuXHRcdHNldEVtYWlscyxcblx0XHRzdWJzY3JpYmVcblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEVtYWlsc0VkaXRvcjsiXSwic291cmNlUm9vdCI6IiJ9