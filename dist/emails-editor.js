var EmailsEditor=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){var r=e(5).default;t.exports=r},function(t,n,e){var r=e(2),o=e(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1},i=(r(o,a),o.locals?o.locals:{});t.exports=i},function(t,n,e){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),i=[];function c(t){for(var n=-1,e=0;e<i.length;e++)if(i[e].identifier===t){n=e;break}return n}function l(t,n){for(var e={},r=[],o=0;o<t.length;o++){var a=t[o],l=n.base?a[0]+n.base:a[0],s=e[l]||0,u="".concat(l," ").concat(s);e[l]=s+1;var f=c(u),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(i[f].references++,i[f].updater(d)):i.push({identifier:u,updater:b(d,n),references:1}),r.push(u)}return r}function s(t){var n=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=e.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){n.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(n);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var u,f=(u=[],function(t,n){return u[t]=n,u.filter(Boolean).join("\n")});function d(t,n,e,r){var o=e?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(n,o);else{var a=document.createTextNode(o),i=t.childNodes;i[n]&&t.removeChild(i[n]),i.length?t.insertBefore(a,i[n]):t.appendChild(a)}}function p(t,n,e){var r=e.css,o=e.media,a=e.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var m=null,v=0;function b(t,n){var e,r,o;if(n.singleton){var a=v++;e=m||(m=s(n)),r=d.bind(null,e,a,!1),o=d.bind(null,e,a,!0)}else e=s(n),r=p.bind(null,e,n),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else o()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var e=l(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<e.length;r++){var o=c(e[r]);i[o].references--}for(var a=l(t,n),s=0;s<e.length;s++){var u=c(e[s]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}e=a}}}},function(t,n,e){(n=e(4)(!1)).push([t.i,'.form-container{width:600px;height:400px;margin:20px}.form{display:flex;flex-direction:column;box-shadow:0 10px 20px 0 rgba(0,0,0,0.3);border-radius:16px 16px 16px 16px;font:400 14px/24px Open Sans,sans-serif}.form__top{flex:0 1 250px;padding:50px 50px 0px 50px;border-radius:16px 16px 0px 0px;background-color:#f8f8f7}.form__bottom{flex:0 1 75px;padding:12.5px 50px 12.5px 50px;border-radius:0px 0px 16px 16px;background-color:white;display:flex;justify-content:flex-start;align-items:center}.form__header{height:50px;display:flex;justify-content:flex-start;align-items:center;font-size:20px}.form__header .bold-text{font-weight:bold}.form__editor{height:170px;min-width:500px;margin-bottom:30px;display:flex;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;background-color:white;border-radius:4px;border:1px solid #c3c1d0;float:left;overflow:auto}.form__editor__input{display:inline-block;flex:1 1 auto;margin:3px;border:none;outline:none;line-height:24px}.form__editor__email{background-color:#e0eaff;display:flex;padding:0px 10px;margin:5px 3px;border:none;border-radius:12px;outline:none;line-height:24px}.form__editor__remover::after{content:"×";font-size:large;padding:0px 5px;cursor:pointer}.form__editor__email--error{text-decoration:underline red}.form__footer{height:100%;display:flex;justify-content:flex-start;align-items:center}.button_primary{color:white;background-color:#4262FF;border-color:#4262FF;border-radius:4px;border:1px solid;padding:10px 20px 10px 20px;margin:0px 10px;text-align:center;font:400 14px/24px Open Sans,sans-serif;cursor:pointer}\n',""]),t.exports=n},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",r=t[3];if(!r)return e;if(n&&"function"==typeof btoa){var o=(i=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(l," */")),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}var i,c,l;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&o[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),n.push(l))}},n}},function(t,n,e){"use strict";e.r(n);e(1);var r=function(t){return"\n        <div class=".concat("form__header",'>\n            Share <span class="bold-text">   ').concat(t,"   </span> with others\n        </div>\n    ")},o=new Map,a=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,i=function(t){return o.has(t)||o.set(t,a.test(t)),o.get(t)},c=function t(n){return"\n        <div class=".concat(t.EDITOR_CLASS,' data-ns="editor">\n            ').concat(t.innerTemplate(n),"\n        </div>\n    ")};c.EDITOR_CLASS="form__editor",c.INPUT_CLASS="form__editor__input",c.EMAIL_CLASS="form__editor__email",c.REMOVER_CLASS="form__editor__remover",c.ERROR_CLASS="form__editor__email--error",c.innerTemplate=function(t){var n=0;return t.reduce((function(t,e){return t+"\n            <div class=".concat(c.EMAIL_CLASS," data-key=").concat(n++,"> \n                <span class=").concat(i(e)?"":c.ERROR_CLASS," > ").concat(e," </span>\n                <span class=").concat(c.REMOVER_CLASS," data-ns=").concat("REMOVE","></span>\n            </div>\n        ")}),"")+"<input class=".concat(c.INPUT_CLASS," data-ns=").concat("RECORD",' type="text" contenteditable="true" placeholder="add more people..."></input>')};var l=c,s=function(t,n){return'\n        <button type="button" class='.concat("button_primary"," data-ns=").concat(n,">\n            ").concat(t,"\n        </button>\n    ")},u=function(){return"\n        <div class=".concat("form__footer",">\n            ").concat(s("Add email","ADD"),"\n            ").concat(s("Get emails count","GET_COUNT"),"\n        </div>\n    ")},f=function(t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t.replace(/[&<>"'/]/gi,(function(t){return n[t]}))};function d(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(){return(p=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}var m=function(t){var n=p({},t);console.log("Build -- [Form] -- start");var e=n.boardName,o=e.replace(/\s/g,""),a=n.emails,i=function(){},c=document.createElement("div");c.setAttribute("id",o),c.setAttribute("class","form-container");var s="\n\t\t<div class=".concat("form",">\t\n\t\t\t<div class=").concat("form__top",">\n\t\t\t\t").concat(r(e),"\n\t\t\t\t").concat(l(a),"\n\t\t\t</div>\n\t\t\t<div class=").concat("form__bottom",">\n\t\t\t\t").concat(u(),"\n\t\t\t</div>\n\t\t</div>\n    ");c.innerHTML=s;return console.log("Build -- [Form] -- end"),{form:c,getEmails:function(){return a},setEmails:function(t){t=t.map((function(t){return f(t.trim())})).filter((function(t){return""!==t})),function(t){document.querySelector("#"+o+" ."+l.EDITOR_CLASS).innerHTML=l.innerTemplate(t)}(a=d(t)),i(a)},subscribe:function(t){i=t}}},v=function(){for(var t,n,e="abcdefghijklmnopqrstuvwxyz",r=(t=4,n=10,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t))+t),o="",a=0;a<r;a++)o+=e[Math.floor(Math.random()*e.length)];return o+"@gmail.com"};function b(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x={"click.REMOVE":function(t,n){var e=t.parentNode.dataset.key,r=n.getEmails();r.splice(e,1),n.setEmails(r)},"click.ADD":function(t,n){var e=n.getEmails(),r=v();e.push(r),n.setEmails(e)},"click.GET_COUNT":function(t,n,e){var r=0;n.getEmails().forEach((function(t){i(t)&&r++})),alert("Valid emails count : "+r)},"keydown.RECORD":function(t,n,e){var r=e.which||e.keyCode;if(13===r||188===r){var o=t.value;if(t.value="",null==o||""===o)return;var a=n.getEmails();a.push(o),n.setEmails(a)}},"paste.RECORD":function(t,n,e){var r=(e.clipboardData||window.clipboardData).getData("text");if(null!=r&&""!==r){r=r.split(",");var o=n.getEmails();n.setEmails([].concat(b(o),b(r)))}},"focusout.RECORD":function(t,n,e){var r=t.value;if(t.value="",null!=r&&""!==r){var o=n.getEmails();o.push(r),n.setEmails(o)}}},g=function(t,n,e,r){var o=x[n+"."+t];"function"==typeof o&&o(e,r,event)},h={listenOn:function(t,n,e){n.forEach((function(n){t.addEventListener(n,(function(t){t.stopPropagation();var n=t.target,r=t.type,o=n.dataset.ns;g(o,r,n,e)}))}))}};function y(t,n){if(null==t)return{};var e,r,o=function(t,n){if(null==t)return{};var e,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||(o[e]=t[e]);return o}(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}n.default=function(t){var n=t.container,e=y(t,["container"]);console.log("Render -- [EmailsEditor] -- Render in ".concat(n.id," with options ").concat(JSON.stringify(e)));var r=m(e),o=r.form,a=r.getEmails,i=r.setEmails,c=r.subscribe;return n.append(o),h.listenOn(o,["click","keydown","focusout","paste"],{setEmails:i,getEmails:a}),console.log("Render -- [EmailsEditor] -- Finishing rendering"),{getEmails:a,setEmails:i,subscribe:c}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2VudHJ5LmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zdHlsZXMvbWFpbi5zY3NzPzY5YzciLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zdHlsZXMvbWFpbi5zY3NzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2NvbXBvbmVudHMvSGVhZGVyLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy91dGlscy92YWxpZGF0ZUVtYWlsLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9jb21wb25lbnRzL0VkaXRvci5qcyIsIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3IvLi9zcmMvZXZlbnRzL05hbWVTcGFjZS5qcyIsIndlYnBhY2s6Ly9FbWFpbHNFZGl0b3IvLi9zcmMvY29tcG9uZW50cy9CdXR0b24uanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2NvbXBvbmVudHMvRm9vdGVyLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9zZWN1cml0eS9zYW5pdGl6ZUlucHV0LmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9jb21wb25lbnRzL0Zvcm0uanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL3V0aWxzL2dldFJhbmRvbUVtYWlsLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9ldmVudHMvSGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2V2ZW50cy9LZXlzLmpzIiwid2VicGFjazovL0VtYWlsc0VkaXRvci8uL3NyYy9ldmVudHMvTGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vRW1haWxzRWRpdG9yLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRW1haWxzRWRpdG9yIiwicmVxdWlyZSIsImFwaSIsImNvbnRlbnQiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImV4cG9ydGVkIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImNvbmNhdCIsImluZGV4Iiwib2JqIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsInB1c2giLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18iLCJ1c2VTb3VyY2VNYXAiLCJ0aGlzIiwibWFwIiwiY3NzTWFwcGluZyIsInNvdXJjZU1hcHBpbmciLCJiYXNlNjQiLCJkYXRhIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiSGVhZGVyIiwiYm9hcmROYW1lIiwiY2FjaGUiLCJNYXAiLCJyZWdleCIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImhhcyIsInNldCIsInRlc3QiLCJFZGl0b3IiLCJlbWFpbHMiLCJFRElUT1JfQ0xBU1MiLCJpbm5lclRlbXBsYXRlIiwiSU5QVVRfQ0xBU1MiLCJFTUFJTF9DTEFTUyIsIlJFTU9WRVJfQ0xBU1MiLCJFUlJPUl9DTEFTUyIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiQnV0dG9uIiwibGFiZWwiLCJGb290ZXIiLCJzYW5pdGl6ZUlucHV0IiwiaW5wdXQiLCJyZXBsYWNlIiwibWF0Y2giLCJGb3JtIiwiY29uc29sZSIsImxvZyIsImNhbGxiYWNrIiwiZm9ybSIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwiZ2V0RW1haWxzIiwic2V0RW1haWxzIiwibmV3RW1haWxzIiwidHJpbSIsInJlbmRlckVtYWlscyIsInN1YnNjcmliZSIsIm5ld0NhbGxiYWNrIiwiZ2V0UmFuZG9tRW1haWwiLCJtaW4iLCJtYXgiLCJjaGFycyIsImFjY291bnRMZW5ndGgiLCJNYXRoIiwiY2VpbCIsImZsb29yIiwicmFuZG9tIiwiYWNjb3VudCIsIkV2ZW50TWFwIiwiYWN0aW9ucyIsImlkeCIsImRhdGFzZXQiLCJuZXdFbWFpbCIsImV2ZW50IiwiYWxlcnQiLCJ3aGljaCIsImtleUNvZGUiLCJjbGlwYm9hcmREYXRhIiwiZ2V0RGF0YSIsInNwbGl0IiwiaGFuZGxlIiwidHlwZSIsImhhbmRsZXIiLCJMaXN0ZW5lciIsImxpc3Rlbk9uIiwiZWxlbWVudCIsImV2ZW50cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJuYW1lU3BhY2UiLCJjb250YWluZXIiLCJhcHBlbmQiXSwibWFwcGluZ3MiOiI2QkFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFB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SVhBLEVBQVE5SixFQUFRaUosRUFBU0ksUUVRWFUsRUFsQkUsQ0FDYkMsU0FBVSxTQUFTQyxFQUFTQyxFQUFRakIsR0FDaENpQixFQUFPOUgsU0FBUSxTQUFDaUgsR0FDWlksRUFBUUUsaUJBQWlCZCxHQUFPLFNBQUNBLEdBQzdCQSxFQUFNZSxrQkFFTixJQUFNcEssRUFBU3FKLEVBQU1ySixPQUNmNkosRUFBT1IsRUFBTVEsS0FDYlEsRUFBWXJLLEVBQU9tSixRQUFROUssR0FJakN1TCxFQUFPUyxFQUFXUixFQUFNN0osRUFBUWlKLFcsb1hDU2pDakssVUFqQk0sU0FBQyxHQUE4QixJQUE1QnNMLEVBQTRCLEVBQTVCQSxVQUFjakwsRUFBYyxtQkFDbkRvSSxRQUFRQyxJQUFSLGdEQUFxRDRDLEVBQVVySixHQUEvRCx5QkFBa0YyQyxLQUFLQyxVQUFVeEUsS0FEOUMsTUFHRG1JLEVBQUtuSSxHQUEvQ3VJLEVBSDJDLEVBRzNDQSxLQUFNRyxFQUhxQyxFQUdyQ0EsVUFBV0MsRUFIMEIsRUFHMUJBLFVBQVdJLEVBSGUsRUFHZkEsVUFPcEMsT0FOR2tDLEVBQVVDLE9BQU8zQyxHQUVqQm1DLEVBQVNDLFNBQVNwQyxFQUFNLENBQUMsUUFBUyxVQUFXLFdBQVksU0FBVSxDQUFDSSxZQUFXRCxjQUVsRk4sUUFBUUMsSUFBUixtREFFTyxDQUNOSyxZQUNBQyxZQUNBSSIsImZpbGUiOiJlbWFpbHMtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgRW1haWxzRWRpdG9yID0gcmVxdWlyZSgnLi9pbmRleCcpLmRlZmF1bHQ7XG5cbm1vZHVsZS5leHBvcnRzID0gRW1haWxzRWRpdG9yOyIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbWFpbi5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVkOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuZm9ybS1jb250YWluZXJ7d2lkdGg6NjAwcHg7aGVpZ2h0OjQwMHB4O21hcmdpbjoyMHB4fS5mb3Jte2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Ym94LXNoYWRvdzowIDEwcHggMjBweCAwIHJnYmEoMCwwLDAsMC4zKTtib3JkZXItcmFkaXVzOjE2cHggMTZweCAxNnB4IDE2cHg7Zm9udDo0MDAgMTRweC8yNHB4IE9wZW4gU2FucyxzYW5zLXNlcmlmfS5mb3JtX190b3B7ZmxleDowIDEgMjUwcHg7cGFkZGluZzo1MHB4IDUwcHggMHB4IDUwcHg7Ym9yZGVyLXJhZGl1czoxNnB4IDE2cHggMHB4IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjd9LmZvcm1fX2JvdHRvbXtmbGV4OjAgMSA3NXB4O3BhZGRpbmc6MTIuNXB4IDUwcHggMTIuNXB4IDUwcHg7Ym9yZGVyLXJhZGl1czowcHggMHB4IDE2cHggMTZweDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDthbGlnbi1pdGVtczpjZW50ZXJ9LmZvcm1fX2hlYWRlcntoZWlnaHQ6NTBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZToyMHB4fS5mb3JtX19oZWFkZXIgLmJvbGQtdGV4dHtmb250LXdlaWdodDpib2xkfS5mb3JtX19lZGl0b3J7aGVpZ2h0OjE3MHB4O21pbi13aWR0aDo1MDBweDttYXJnaW4tYm90dG9tOjMwcHg7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWNvbnRlbnQ6ZmxleC1zdGFydDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2MzYzFkMDtmbG9hdDpsZWZ0O292ZXJmbG93OmF1dG99LmZvcm1fX2VkaXRvcl9faW5wdXR7ZGlzcGxheTppbmxpbmUtYmxvY2s7ZmxleDoxIDEgYXV0bzttYXJnaW46M3B4O2JvcmRlcjpub25lO291dGxpbmU6bm9uZTtsaW5lLWhlaWdodDoyNHB4fS5mb3JtX19lZGl0b3JfX2VtYWlse2JhY2tncm91bmQtY29sb3I6I2UwZWFmZjtkaXNwbGF5OmZsZXg7cGFkZGluZzowcHggMTBweDttYXJnaW46NXB4IDNweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjEycHg7b3V0bGluZTpub25lO2xpbmUtaGVpZ2h0OjI0cHh9LmZvcm1fX2VkaXRvcl9fcmVtb3Zlcjo6YWZ0ZXJ7Y29udGVudDpcXFwiw5dcXFwiO2ZvbnQtc2l6ZTpsYXJnZTtwYWRkaW5nOjBweCA1cHg7Y3Vyc29yOnBvaW50ZXJ9LmZvcm1fX2VkaXRvcl9fZW1haWwtLWVycm9ye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgcmVkfS5mb3JtX19mb290ZXJ7aGVpZ2h0OjEwMCU7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOmNlbnRlcn0uYnV0dG9uX3ByaW1hcnl7Y29sb3I6d2hpdGU7YmFja2dyb3VuZC1jb2xvcjojNDI2MkZGO2JvcmRlci1jb2xvcjojNDI2MkZGO2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQ7cGFkZGluZzoxMHB4IDIwcHggMTBweCAyMHB4O21hcmdpbjowcHggMTBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250OjQwMCAxNHB4LzI0cHggT3BlbiBTYW5zLHNhbnMtc2VyaWY7Y3Vyc29yOnBvaW50ZXJ9XFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBIRUFERVJfQ0xBU1MgPSBcImZvcm1fX2hlYWRlclwiO1xuXG5jb25zdCBIZWFkZXIgPSAoYm9hcmROYW1lKSA9PiB7XG5cdC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbSGVhZGVyXSAtLSBzdGFydGApO1xuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9JHtIRUFERVJfQ0xBU1N9PlxuICAgICAgICAgICAgU2hhcmUgPHNwYW4gY2xhc3M9XCJib2xkLXRleHRcIj4gXFx1MDBBMCAke2JvYXJkTmFtZX0gXFx1MDBBMCA8L3NwYW4+IHdpdGggb3RoZXJzXG4gICAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgQnVpbGQgLS0gW0hlYWRlcl0gLS0gZW5kYCk7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xuY29uc3QgcmVnZXggPSAvXlthLXpBLVowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOS1dKyg/OlxcLlthLXpBLVowLTktXSspKiQvO1xuXG5jb25zdCB2YWxpZGF0ZUVtYWlsID0gKGVtYWlsKSA9PiB7XG5cdC8vIGNvbnNvbGUubG9nKFwiY2FjaGVlZCA6IFwiLCBjYWNoZS5oYXMoZW1haWwpKTtcblxuXHRpZiAoIWNhY2hlLmhhcyhlbWFpbCkpIHtcblx0XHRjYWNoZS5zZXQoZW1haWwsIHJlZ2V4LnRlc3QoZW1haWwpKTtcblx0fVxuXG5cdHJldHVybiBjYWNoZS5nZXQoZW1haWwpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGVFbWFpbDsiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHtSRU1PVkUsIFJFQ09SRH0gZnJvbSBcIi4uL2V2ZW50cy9OYW1lU3BhY2VcIjtcbmltcG9ydCB2YWxpZGF0ZUVtYWlsIGZyb20gXCIuLi91dGlscy92YWxpZGF0ZUVtYWlsXCI7XG5cbmNvbnN0IEVkaXRvciA9IChlbWFpbHMpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgQnVpbGQgLS0gW0VkaXRvcl0gLS0gc3RhcnRgKTtcbiAgICBcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz0ke0VkaXRvci5FRElUT1JfQ0xBU1N9IGRhdGEtbnM9XCJlZGl0b3JcIj5cbiAgICAgICAgICAgICR7RWRpdG9yLmlubmVyVGVtcGxhdGUoZW1haWxzKX1cbiAgICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbRWRpdG9yXSAtLSBlbmRgKTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5cbkVkaXRvci5FRElUT1JfQ0xBU1MgPSBcImZvcm1fX2VkaXRvclwiO1xuRWRpdG9yLklOUFVUX0NMQVNTID0gXCJmb3JtX19lZGl0b3JfX2lucHV0XCI7XG5FZGl0b3IuRU1BSUxfQ0xBU1MgPSBcImZvcm1fX2VkaXRvcl9fZW1haWxcIjtcbkVkaXRvci5SRU1PVkVSX0NMQVNTID0gXCJmb3JtX19lZGl0b3JfX3JlbW92ZXJcIjtcbkVkaXRvci5FUlJPUl9DTEFTUyA9IFwiZm9ybV9fZWRpdG9yX19lbWFpbC0tZXJyb3JcIjtcblxuRWRpdG9yLmlubmVyVGVtcGxhdGUgPSAoZW1haWxzKSA9PiB7XG4gICAgbGV0IGtleSA9IDA7XG4gICAgXG4gICAgcmV0dXJuIGVtYWlscy5yZWR1Y2UoIChhY2N1bXVsYXRvciwgZW1haWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yICsgYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz0ke0VkaXRvci5FTUFJTF9DTEFTU30gZGF0YS1rZXk9JHtrZXkrK30+IFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSR7dmFsaWRhdGVFbWFpbChlbWFpbCkgPyBcIlwiOiBFZGl0b3IuRVJST1JfQ0xBU1N9ID4gJHtlbWFpbH0gPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSR7RWRpdG9yLlJFTU9WRVJfQ0xBU1N9IGRhdGEtbnM9JHtSRU1PVkV9Pjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgXG4gICAgfSwgXCJcIikgKyBcbiAgICBgPGlucHV0IGNsYXNzPSR7RWRpdG9yLklOUFVUX0NMQVNTfSBkYXRhLW5zPSR7UkVDT1JEfSB0eXBlPVwidGV4dFwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIiBwbGFjZWhvbGRlcj1cImFkZCBtb3JlIHBlb3BsZS4uLlwiPjwvaW5wdXQ+YFxufTtcblxuZXhwb3J0IGRlZmF1bHQgRWRpdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgY29uc3QgUkVNT1ZFID0gXCJSRU1PVkVcIjtcbmV4cG9ydCBjb25zdCBBREQgPSBcIkFERFwiO1xuZXhwb3J0IGNvbnN0IEdFVF9DT1VOVCA9IFwiR0VUX0NPVU5UXCI7XG5leHBvcnQgY29uc3QgUkVDT1JEID0gXCJSRUNPUkRcIjsiLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgQlVUVE9OX1BSSU1BUllfQ0xBU1M9IFwiYnV0dG9uX3ByaW1hcnlcIjtcblxuY29uc3QgQnV0dG9uID0gKGxhYmVsLCBucykgPT4ge1xuXHQvLyBjb25zb2xlLmxvZyhgQnVpbGQgLS0gW0J1dHRvbl0gLS0gc3RhcnRgKTtcblxuICAgIGNvbnN0IHRlbXBsYXRlID0gYFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz0ke0JVVFRPTl9QUklNQVJZX0NMQVNTfSBkYXRhLW5zPSR7bnN9PlxuICAgICAgICAgICAgJHtsYWJlbH1cbiAgICAgICAgPC9idXR0b24+XG4gICAgYDtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbQnV0dG9uXSAtLSBlbmRgKTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbjsiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi9CdXR0b25cIjtcbmltcG9ydCB7IEFERCwgR0VUX0NPVU5UIH0gZnJvbSBcIi4uL2V2ZW50cy9OYW1lU3BhY2VcIjtcblxuY29uc3QgRk9PVEVSX0NMQVNTID0gXCJmb3JtX19mb290ZXJcIjtcblxuY29uc3QgRm9vdGVyID0gKCkgPT4ge1xuXHQvLyBjb25zb2xlLmxvZyhgQnVpbGQgLS0gW0Zvb3Rlcl0gLS0gc3RhcnRgKTtcblxuICAgIGNvbnN0IHRlbXBsYXRlID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPSR7Rk9PVEVSX0NMQVNTfT5cbiAgICAgICAgICAgICR7QnV0dG9uKFwiQWRkIGVtYWlsXCIsIEFERCl9XG4gICAgICAgICAgICAke0J1dHRvbihcIkdldCBlbWFpbHMgY291bnRcIiwgR0VUX0NPVU5UKX1cbiAgICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbRm9vdGVyXSAtLSBlbmRgKTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvb3RlcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gRXNjYXBlIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVycyB3aXRoIEhUTUwgZW50aXR5IGVuY29kaW5nIHRvIHByZXZlbnQgc3dpdGNoaW5nIGludG8gYW55IGV4ZWN1dGlvbiBjb250ZXh0XG5jb25zdCBzYW5pdGl6ZUlucHV0ID0gKGlucHV0KSA9PiB7XG5cdGNvbnN0IG1hcCA9IHtcblx0XHRcIiZcIjogXCImYW1wO1wiLFxuXHRcdFwiPFwiOiBcIiZsdDtcIixcblx0XHRcIj5cIjogXCImZ3Q7XCIsXG5cdFx0J1wiJzogXCImcXVvdDtcIixcblx0XHRcIidcIjogXCImI3gyNztcIixcblx0XHRcIi9cIjogXCImI3gyRjtcIlxuXHR9O1xuXG5cdGNvbnN0IHJlZ2V4ID0gL1smPD5cIicvXS9naTtcblxuXHRyZXR1cm4gaW5wdXQucmVwbGFjZShyZWdleCwgKG1hdGNoKSA9PiBtYXBbbWF0Y2hdKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNhbml0aXplSW5wdXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IEhlYWRlciBmcm9tIFwiLi9IZWFkZXJcIjtcbmltcG9ydCBFZGl0b3IgZnJvbSBcIi4vRWRpdG9yXCI7XG5pbXBvcnQgRm9vdGVyIGZyb20gXCIuL0Zvb3RlclwiO1xuaW1wb3J0IHNhbml0aXplSW5wdXQgZnJvbSBcIi4uL3NlY3VyaXR5L3Nhbml0aXplSW5wdXRcIjtcblxuY29uc3QgQ09OVEFJTkVSX0NMQVNTID0gXCJmb3JtLWNvbnRhaW5lclwiO1xuY29uc3QgRk9STV9DTEFTUyA9IFwiZm9ybVwiO1xuY29uc3QgRk9STV9UT1BfQ0xBU1MgPSBcImZvcm1fX3RvcFwiO1xuY29uc3QgRk9STV9CT1RUT01fQ0xBU1MgPSBcImZvcm1fX2JvdHRvbVwiO1xuXG5jb25zdCBGb3JtID0gKHsgLi4ub3B0aW9ucyB9KSA9PiB7XG5cdGNvbnNvbGUubG9nKGBCdWlsZCAtLSBbRm9ybV0gLS0gc3RhcnRgKTtcblxuXHRsZXQgYm9hcmROYW1lID0gb3B0aW9ucy5ib2FyZE5hbWU7XG5cdGxldCBpZCA9IGJvYXJkTmFtZS5yZXBsYWNlKC9cXHMvZywgJycpOyBcblx0bGV0IGVtYWlscyA9IG9wdGlvbnMuZW1haWxzO1xuXHRsZXQgY2FsbGJhY2sgPSAoKSA9PiB7fTtcblxuXHRjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0Zm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG5cdGZvcm0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgQ09OVEFJTkVSX0NMQVNTKTtcblxuXHRjb25zdCB0ZW1wbGF0ZSA9IGBcblx0XHQ8ZGl2IGNsYXNzPSR7Rk9STV9DTEFTU30+XHRcblx0XHRcdDxkaXYgY2xhc3M9JHtGT1JNX1RPUF9DTEFTU30+XG5cdFx0XHRcdCR7SGVhZGVyKGJvYXJkTmFtZSl9XG5cdFx0XHRcdCR7RWRpdG9yKGVtYWlscyl9XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3M9JHtGT1JNX0JPVFRPTV9DTEFTU30+XG5cdFx0XHRcdCR7Rm9vdGVyKCl9XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cbiAgICBgO1xuXG5cdGZvcm0uaW5uZXJIVE1MID0gdGVtcGxhdGU7XG5cblx0Y29uc3QgcmVuZGVyRW1haWxzID0gKGVtYWlscykgPT4ge1x0XG5cdFx0Y29uc3QgZWRpdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpZCArICcgLicgKyBFZGl0b3IuRURJVE9SX0NMQVNTKTtcblx0XHRlZGl0b3IuaW5uZXJIVE1MID0gRWRpdG9yLmlubmVyVGVtcGxhdGUoZW1haWxzKTtcblx0fVxuXG5cdGNvbnN0IGdldEVtYWlscyA9ICgpID0+IGVtYWlscztcblxuXHRjb25zdCBzZXRFbWFpbHMgPSAobmV3RW1haWxzKSA9PiB7XG5cdFx0bmV3RW1haWxzID0gbmV3RW1haWxzLm1hcChlbWFpbCA9PiBzYW5pdGl6ZUlucHV0KGVtYWlsLnRyaW0oKSkpXG5cdFx0XHRcdCAgICAgICAgICAgIC5maWx0ZXIoZW1haWwgPT4gZW1haWwgIT09IFwiXCIpO1xuXG5cdFx0ZW1haWxzID0gWy4uLm5ld0VtYWlsc107XG5cdFx0cmVuZGVyRW1haWxzKGVtYWlscyk7XG5cdFx0Y2FsbGJhY2soZW1haWxzKTtcblx0fTtcblxuXHRjb25zdCBzdWJzY3JpYmUgPSAobmV3Q2FsbGJhY2spID0+IHtcblx0XHRjYWxsYmFjayA9IG5ld0NhbGxiYWNrO1xuXHR9XG5cblx0Y29uc29sZS5sb2coYEJ1aWxkIC0tIFtGb3JtXSAtLSBlbmRgKTtcblxuXHRyZXR1cm4ge1xuXHRcdGZvcm0sXG5cdFx0Z2V0RW1haWxzLFxuXHRcdHNldEVtYWlscyxcblx0XHRzdWJzY3JpYmVcblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGdldFJhbmRvbUludCA9IChtaW4sIG1heCkgPT4ge1xuXHRtaW4gPSBNYXRoLmNlaWwobWluKTtcblx0bWF4ID0gTWF0aC5mbG9vcihtYXgpO1xuXG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XG59O1xuXG5jb25zdCBnZXRSYW5kb21FbWFpbCA9ICgpID0+IHtcblx0Y29uc3QgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG5cdGNvbnN0IGFjY291bnRMZW5ndGggPSBnZXRSYW5kb21JbnQoNCwgMTApO1xuXG5cdGxldCBhY2NvdW50ID0gXCJcIjtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGFjY291bnRMZW5ndGg7IGkrKykge1xuXHRcdGFjY291bnQgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XG5cdH1cblxuXHRyZXR1cm4gYWNjb3VudCArIFwiQGdtYWlsLmNvbVwiO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0UmFuZG9tRW1haWw7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgRU5URVIsIENPTU1BIH0gZnJvbSBcIi4vS2V5c1wiO1xuaW1wb3J0IGdldFJhbmRvbUVtYWlsIGZyb20gXCIuLi91dGlscy9nZXRSYW5kb21FbWFpbFwiO1xuaW1wb3J0IHZhbGlkYXRlRW1haWwgZnJvbSBcIi4uL3V0aWxzL3ZhbGlkYXRlRW1haWxcIjtcblxuY29uc3QgaGFuZGxlID0gZnVuY3Rpb24obnMsIHR5cGUsIHRhcmdldCwgYWN0aW9ucykge1xuXHRjb25zdCBldmVudEtleSA9IHR5cGUgKyBcIi5cIiArIG5zO1xuXHRjb25zdCBoYW5kbGVyID0gRXZlbnRNYXBbZXZlbnRLZXldO1xuXG5cdGlmICh0eXBlb2YgaGFuZGxlciAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aGFuZGxlcih0YXJnZXQsIGFjdGlvbnMsIGV2ZW50KTtcbn07XG5cbmNvbnN0IEV2ZW50TWFwID0ge1xuXHRcImNsaWNrLlJFTU9WRVwiOiAodGFyZ2V0LCBhY3Rpb25zKSA9PiB7XG5cdFx0Y29uc3QgaWR4ID0gdGFyZ2V0LnBhcmVudE5vZGUuZGF0YXNldC5rZXk7XG5cdFx0Y29uc3QgZW1haWxzID0gYWN0aW9ucy5nZXRFbWFpbHMoKTtcblx0XHRlbWFpbHMuc3BsaWNlKGlkeCwgMSk7XG5cdFx0YWN0aW9ucy5zZXRFbWFpbHMoZW1haWxzKTtcblx0fSxcblx0XCJjbGljay5BRERcIjogKHRhcmdldCwgYWN0aW9ucykgPT4ge1xuXHRcdGNvbnN0IGVtYWlscyA9IGFjdGlvbnMuZ2V0RW1haWxzKCk7XG5cdFx0Y29uc3QgbmV3RW1haWwgPSBnZXRSYW5kb21FbWFpbCgpO1xuXHRcdGVtYWlscy5wdXNoKG5ld0VtYWlsKTtcblx0XHRhY3Rpb25zLnNldEVtYWlscyhlbWFpbHMpO1xuXHR9LFxuXHRcImNsaWNrLkdFVF9DT1VOVFwiOiAodGFyZ2V0LCBhY3Rpb25zLCBldmVudCkgPT4ge1xuXHRcdGxldCBjb3VudCA9IDA7XG5cblx0XHRjb25zdCBlbWFpbHMgPSBhY3Rpb25zLmdldEVtYWlscygpO1xuXHRcdGVtYWlscy5mb3JFYWNoKChlbWFpbCkgPT4ge1xuXHRcdFx0aWYgKHZhbGlkYXRlRW1haWwoZW1haWwpKSB7XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRhbGVydChcIlZhbGlkIGVtYWlscyBjb3VudCA6IFwiICsgY291bnQpO1xuXHR9LFxuXHRcImtleWRvd24uUkVDT1JEXCI6ICh0YXJnZXQsIGFjdGlvbnMsIGV2ZW50KSA9PiB7XG5cdFx0Y29uc3Qga2V5ID0gZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZTtcblxuXHRcdGlmIChrZXkgPT09IEVOVEVSIHx8IGtleSA9PT0gQ09NTUEpIHtcblx0XHRcdGNvbnN0IG5ld0VtYWlsID0gdGFyZ2V0LnZhbHVlO1xuXHRcdFx0dGFyZ2V0LnZhbHVlID0gXCJcIjtcblxuXHRcdFx0aWYgKG5ld0VtYWlsID09PSBudWxsIHx8IG5ld0VtYWlsID09PSB1bmRlZmluZWQgfHwgbmV3RW1haWwgPT09IFwiXCIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZW1haWxzID0gYWN0aW9ucy5nZXRFbWFpbHMoKTtcblx0XHRcdGVtYWlscy5wdXNoKG5ld0VtYWlsKTtcblx0XHRcdGFjdGlvbnMuc2V0RW1haWxzKGVtYWlscyk7XG5cdFx0fVxuXHR9LFxuXHRcInBhc3RlLlJFQ09SRFwiOiAodGFyZ2V0LCBhY3Rpb25zLCBldmVudCkgPT4ge1xuXHRcdFx0bGV0IG5ld0VtYWlscyA9IChldmVudC5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhKS5nZXREYXRhKFwidGV4dFwiKTtcblxuXHRcdFx0aWYgKG5ld0VtYWlscyA9PT0gbnVsbCB8fCBuZXdFbWFpbHMgPT09IHVuZGVmaW5lZCB8fCBuZXdFbWFpbHMgPT09IFwiXCIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0bmV3RW1haWxzID0gbmV3RW1haWxzLnNwbGl0KFwiLFwiKTtcblx0XHRcdGNvbnN0IGVtYWlscyA9IGFjdGlvbnMuZ2V0RW1haWxzKCk7XG5cblx0XHRcdGFjdGlvbnMuc2V0RW1haWxzKFsuLi5lbWFpbHMsIC4uLm5ld0VtYWlsc10pO1x0XG5cdH0sXG5cdFwiZm9jdXNvdXQuUkVDT1JEXCI6ICh0YXJnZXQsIGFjdGlvbnMsIGV2ZW50KSA9PiB7XG5cdFx0Y29uc3QgbmV3RW1haWwgPSB0YXJnZXQudmFsdWU7XG5cdFx0dGFyZ2V0LnZhbHVlID0gXCJcIjtcblxuXHRcdGlmIChuZXdFbWFpbCA9PT0gbnVsbCB8fCBuZXdFbWFpbCA9PT0gdW5kZWZpbmVkIHx8IG5ld0VtYWlsID09PSBcIlwiKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgZW1haWxzID0gYWN0aW9ucy5nZXRFbWFpbHMoKTtcblx0XHRlbWFpbHMucHVzaChuZXdFbWFpbCk7XG5cdFx0YWN0aW9ucy5zZXRFbWFpbHMoZW1haWxzKTtcblx0fVxufTtcblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBjb25zdCBFTlRFUiA9IDEzO1xuZXhwb3J0IGNvbnN0IENPTU1BID0gMTg4OyIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgaGFuZGxlIGZyb20gXCIuL0hhbmRsZXJzXCI7XG5cbmNvbnN0IExpc3RlbmVyID0ge1xuICAgIGxpc3Rlbk9uOiBmdW5jdGlvbihlbGVtZW50LCBldmVudHMsIGFjdGlvbnMpIHtcbiAgICAgICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsXHQoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gZXZlbnQudHlwZTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lU3BhY2UgPSB0YXJnZXQuZGF0YXNldC5ucztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgJHt0eXBlfSBvbiAke25hbWVTcGFjZX1gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBoYW5kbGUobmFtZVNwYWNlLCB0eXBlLCB0YXJnZXQsIGFjdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IExpc3RlbmVyOyIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgXCIuL3N0eWxlcy9tYWluLnNjc3NcIjtcbmltcG9ydCBGb3JtIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVwiO1xuaW1wb3J0IExpc3RlbmVyIGZyb20gXCIuL2V2ZW50cy9MaXN0ZW5lclwiO1xuXG4vLyBUT0RPIGxvZyB0aW1lIHNwZW50XG5cbmNvbnN0IEVtYWlsc0VkaXRvciA9ICh7IGNvbnRhaW5lciwgLi4ub3B0aW9ucyB9KSA9PiB7XG5cdGNvbnNvbGUubG9nKGBSZW5kZXIgLS0gW0VtYWlsc0VkaXRvcl0gLS0gUmVuZGVyIGluICR7Y29udGFpbmVyLmlkfSB3aXRoIG9wdGlvbnMgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zKX1gKTtcblxuXHRjb25zdCB7IGZvcm0sIGdldEVtYWlscywgc2V0RW1haWxzLCBzdWJzY3JpYmUgfSA9IEZvcm0ob3B0aW9ucyk7XG4gICAgY29udGFpbmVyLmFwcGVuZChmb3JtKTtcbiAgICBcbiAgICBMaXN0ZW5lci5saXN0ZW5Pbihmb3JtLCBbXCJjbGlja1wiLCBcImtleWRvd25cIiwgXCJmb2N1c291dFwiLCBcInBhc3RlXCJdLCB7c2V0RW1haWxzLCBnZXRFbWFpbHN9KTtcblxuXHRjb25zb2xlLmxvZyhgUmVuZGVyIC0tIFtFbWFpbHNFZGl0b3JdIC0tIEZpbmlzaGluZyByZW5kZXJpbmdgKTtcblxuXHRyZXR1cm4ge1xuXHRcdGdldEVtYWlscyxcblx0XHRzZXRFbWFpbHMsXG5cdFx0c3Vic2NyaWJlXG5cdH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFbWFpbHNFZGl0b3I7Il0sInNvdXJjZVJvb3QiOiIifQ==